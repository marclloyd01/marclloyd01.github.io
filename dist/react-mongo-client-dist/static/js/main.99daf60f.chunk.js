(this["webpackJsonpreact-mongo"]=this["webpackJsonpreact-mongo"]||[]).push([[0],{129:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(43),r=a.n(s),i=(a(129),a(35)),l=a.n(i),o=a(53),j=a(6),u=a(38),d=a.n(u),b=a(47),O=a(201),x=a(213),h=a(204),m=a(212),f=a(61),p=a.n(f),v=a(62),g=a.n(v),N=a(208),C=a(210),y=a(1),S=function(e){var t=e.handleLogin,a=e.loginLoading,n=e.loginFail,s=e.invalidEmail,r=e.accountNotExists,i=e.setAccountNotExists,l=e.setLoginFail,o=e.setInvalidEmail,u=e.setFieldsEmpty,d=Object(c.useState)(""),f=Object(j.a)(d,2),v=f[0],S=f[1],k=Object(c.useState)(""),w=Object(j.a)(k,2),E=w[0],P=w[1],F=Object(c.useState)(!1),I=Object(j.a)(F,2),A=I[0],L=I[1];return Object(y.jsxs)(C.a,{className:"",children:[r&&Object(y.jsx)(O.a,{severity:"error",onClose:function(){i(!1)},children:"Account does not exist"}),n&&Object(y.jsx)(O.a,{severity:"error",onClose:function(){l(!1)},children:"Login failed"}),s&&Object(y.jsx)(O.a,{severity:"error",onClose:function(){o(!1)},children:"Invalid Email Address"}),a&&Object(y.jsx)(O.a,{severity:"info",children:"Logging in..."}),Object(y.jsxs)("form",{children:[Object(y.jsx)("h2",{children:"Login"}),Object(y.jsx)("label",{className:"h5",children:"Email"}),Object(y.jsx)(x.a,{fullWidth:!0,placeholder:"Email",value:v,onChange:function(e){S(e.target.value)}}),Object(y.jsx)("label",{className:"h5 mt-2",children:"Password"}),Object(y.jsx)(x.a,{fullWidth:!0,type:A?"text":"password",placeholder:"Password",value:E,onChange:function(e){P(e.target.value)},endAdornment:Object(y.jsx)(h.a,{position:"end",onClick:function(){L(!A)},children:Object(y.jsx)(m.a,{children:A?Object(y.jsx)(p.a,{}):Object(y.jsx)(g.a,{})})})}),Object(y.jsx)(N.a,{type:"submit",fullWidth:!0,className:"my-3",variant:"contained",onClick:function(e){t(v,E,e)},children:"Login"}),Object(y.jsx)(b.b,{to:{pathname:"./register"},onClick:function(){u()},children:"Don't have an account? Register here"})]})]})},k=function(e){var t=e.handleRegister,a=e.regLoading,n=e.invalidRegister,s=e.handleInvalidRegisterClose,r=e.passwordMismatch,i=e.setPasswordMismatch,l=e.emailExists,o=e.setEmailExists,u=e.setFieldsEmpty,d=Object(c.useState)(""),f=Object(j.a)(d,2),v=f[0],C=f[1],S=Object(c.useState)(""),k=Object(j.a)(S,2),w=k[0],E=k[1],P=Object(c.useState)(""),F=Object(j.a)(P,2),I=F[0],A=F[1],L=Object(c.useState)(""),R=Object(j.a)(L,2),T=R[0],B=R[1],W=Object(c.useState)(!1),M=Object(j.a)(W,2),z=M[0],D=M[1];return Object(y.jsxs)("div",{className:"",children:[r&&Object(y.jsx)(O.a,{severity:"error",className:"my-3",onClose:function(){i(!1)},children:"Passwords do not match"}),l&&Object(y.jsxs)(O.a,{severity:"error",onClose:function(){o(!1)},children:["Email already exists"," "]}),a&&Object(y.jsx)(O.a,{severity:"info",children:" Registering... "}),n&&Object(y.jsx)(O.a,{severity:"error",onClose:function(){s()},children:"Invalid Email Address"}),Object(y.jsx)("h2",{children:"Register"}),Object(y.jsxs)("form",{children:[Object(y.jsx)("label",{className:"h5 d-block",children:"Name"}),Object(y.jsx)(x.a,{fullWidth:!0,placeholder:"Name",value:T,onChange:function(e){B(e.target.value)}}),Object(y.jsx)("label",{className:"h5 mt-2",children:"Email"}),Object(y.jsx)(x.a,{fullWidth:!0,type:"email",placeholder:"Email",value:v,onChange:function(e){C(e.target.value)}}),Object(y.jsx)("label",{className:"h5 mt-2",children:"Password"}),Object(y.jsx)(x.a,{fullWidth:!0,type:z?"text":"password",placeholder:"Password",value:w,onChange:function(e){E(e.target.value)},endAdornment:Object(y.jsx)(h.a,{position:"end",onClick:function(){D(!z)},children:Object(y.jsx)(m.a,{children:z?Object(y.jsx)(p.a,{}):Object(y.jsx)(g.a,{})})})}),Object(y.jsx)("label",{className:"h5 mt-2",children:"Confirm Password"}),Object(y.jsx)(x.a,{fullWidth:!0,type:z?"text":"password",placeholder:"Password",value:I,onChange:function(e){A(e.target.value)},endAdornment:Object(y.jsx)(h.a,{position:"end",onClick:function(){D(!z)},children:Object(y.jsx)(m.a,{children:z?Object(y.jsx)(p.a,{}):Object(y.jsx)(g.a,{})})})}),Object(y.jsx)(N.a,{className:"my-3",type:"submit",fullWidth:!0,variant:"contained",onClick:function(e){t(v,w,T,I,e)},children:"Register"})]}),Object(y.jsx)(b.b,{to:{pathname:"/"},onClick:function(){u()},children:"Have an account? Login here"})]})},w=a(95),E=a(16),P=a(214),F=a(207),I=function(e){var t=e.handleChangeCount,a=e.fruitCount,c=e.transactionState;return Object(y.jsx)(P.a,{children:Object(y.jsx)(F.a,{InputProps:{endAdornment:Object(y.jsx)(h.a,{position:"start",children:"kg"})},disabled:c,size:"small",inputProps:{min:1},type:"tel",label:"Kilo",id:"select-count",value:isNaN(a)?0:a,onChange:function(e){t(parseInt(e.target.value,10))}})})},A=a(202),L=a(76),R=a.n(L),T=function(e){var t=e.fruitItem,a=e.fruitPrice,n=e.handleRemove,s=e.fruitCount,r=e.handleCount,i=(e.fruitTotal,e.transactionState),l=Object(c.useState)(s),o=Object(j.a)(l,2),u=o[0],d=o[1];return Object(y.jsxs)(A.a,{divider:!0,secondaryAction:Object(y.jsx)(m.a,{disabled:i,onClick:function(){n(t)},children:Object(y.jsx)(R.a,{})}),children:[Object(y.jsx)(C.a,{className:"col-3 text-center",children:t}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:a}),Object(y.jsx)(I,{transactionState:i,count:u,handleChangeCount:function(e){isNaN(e)&&(e=0),d(e),r(t,a,e)},fruitItem:t,fruitCount:s}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:isNaN(u)?"":a*u})]})},B=function(e){var t=e.item;return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(A.a,{divider:!0,children:[Object(y.jsx)(C.a,{className:"col-3 text-center",children:t.item}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:t.price}),Object(y.jsxs)(C.a,{className:"col-3 text-center",children:[t.count," kg"]}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:t.totalPrice})]})})},W=a(215),M=function(e){var t=e.data,a=e.showTransaction,c=e.handleBuy;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h2",{children:"Transaction"}),"User: ",t.name,Object(y.jsxs)(W.a,{children:[Object(y.jsxs)(A.a,{children:[Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Item"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Price"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Kilo"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Total Price"})]}),t.items.length>0?t.items.map((function(e,t){return Object(y.jsx)(B,{item:e},t)})):"",Object(y.jsxs)(A.a,{children:[Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Final Bill"}),Object(y.jsx)(C.a,{className:"col-3 text-center"}),Object(y.jsx)(C.a,{className:"col-3 text-center"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:Object(y.jsx)("strong",{children:t.total})})]})]}),Object(y.jsxs)(C.a,{className:"d-flex justify-content-between",children:[Object(y.jsx)(N.a,{variant:"contained",onClick:function(){a(!1)},children:"Edit"}),Object(y.jsx)(N.a,{variant:"contained",onClick:function(){c()},children:"Buy"})]})]})},z=function(e){var t=e.data,a=e.handleCloseModal;return Object(y.jsxs)(C.a,{children:[Object(y.jsx)("h2",{children:"Your Bill"}),"User: ",t.userName,Object(y.jsx)("br",{}),"Transaction Id: ",t._id,Object(y.jsxs)(W.a,{children:[Object(y.jsxs)(A.a,{children:[Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Item"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Price"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Kilo"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Total Price"})]}),t.items.length>0?t.items.map((function(e,t){return Object(y.jsx)(B,{item:e},t)})):"",Object(y.jsxs)(A.a,{children:[Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Final Bill"}),Object(y.jsx)(C.a,{className:"col-3 text-center"}),Object(y.jsx)(C.a,{className:"col-3 text-center"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:Object(y.jsx)("strong",{children:t.finalBill})})]})]}),Object(y.jsx)(C.a,{className:"",children:Object(y.jsx)(N.a,{variant:"contained",fullWidth:!0,onClick:function(){a()},children:"Close"})})]})},D=a(198),K=a(203),U=a(205),Z=a(211),$=a(199),H=function(e){var t=e.currentUser,a=e.fruits,n=e.setFruits,s=Object(c.useState)(a),r=Object(j.a)(s,2),i=r[0],u=(r[1],Object(c.useState)("default")),b=Object(j.a)(u,2),x=b[0],h=b[1],f=Object(c.useState)([]),p=Object(j.a)(f,2),v=p[0],g=p[1],S=Object(c.useState)(!1),k=Object(j.a)(S,2),F=k[0],I=k[1],L=Object(c.useState)(!1),B=Object(j.a)(L,2),H=B[0],J=B[1],_=Object(c.useState)(!1),Y=Object(j.a)(_,2),q=Y[0],G=Y[1],Q=Object(c.useState)([]),V=Object(j.a)(Q,2),X=V[0],ee=V[1],te=Object(c.useState)([]),ae=Object(j.a)(te,2),ce=ae[0],ne=ae[1],se="https://react-mongo-lloyd.herokuapp.com/api/",re=function(e){var t=i.filter((function(t){return t.item===e})),c=v.filter((function(t){return t.item!==e}));g(c);var s=t[0];n([].concat(Object(E.a)(a),[s]))},ie=function(e,t,a){var c=v.map((function(c){return c.item===e?Object(w.a)(Object(w.a)({},c),{},{count:a,totalPrice:t*a}):c}));g(c)},le=function(){var e=Object(o.a)(l.a.mark((function e(){var t,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de(!0),G(!0),e.next=4,d.a.post("".concat(se,"transactions"),{name:X.name,userId:X.userId,items:X.items,total:X.total});case 4:return t=e.sent,a=t.data.data.insertedId,e.next=8,d.a.get("".concat(se,"transactions/").concat(a));case 8:c=e.sent,ne(c.data.data),G(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=Object(c.useState)(!1),je=Object(j.a)(oe,2),ue=je[0],de=je[1];return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)($.a,{open:ue,children:Object(y.jsx)(C.a,{sx:{position:"absolute",width:"75%",top:"50%",left:"50%",transform:"translate(-50%,-50%)",bgcolor:"background.paper",boxShadow:24,padding:4},children:q?Object(y.jsx)("div",{className:"text-center",children:Object(y.jsx)(Z.a,{})}):Object(y.jsx)(z,{data:ce,handleCloseModal:function(){de(!1),J(!1),g([]),n(i)}})})}),F?Object(y.jsx)(O.a,{severity:"error",className:"mb-3",onClose:function(){I(!1)},children:"Fruit already added"}):"",Object(y.jsxs)(C.a,{className:"",children:[Object(y.jsx)("h2",{children:"Shop"}),Object(y.jsx)(C.a,{className:"row justify-content-center",children:Object(y.jsxs)(C.a,{className:"",children:["Hello ",t.name]})}),Object(y.jsxs)(C.a,{className:"row justify-content-center w-50 m-auto",children:[Object(y.jsxs)(P.a,{className:"col-9",size:"small",children:[Object(y.jsx)(U.a,{id:"select-label-fruits",children:"Fruits"}),Object(y.jsxs)(D.a,{disabled:!(0!==a.length&&!H),labelId:"select-label-fruits",id:"select-fruits",value:x,label:"Fruits",onChange:function(e){h(e.target.value)},children:[Object(y.jsx)(K.a,{disabled:!0,value:"default",children:"Select Fruit"}),a.map((function(e,t){return Object(y.jsx)(K.a,{value:e.item,children:e.item},t)}))]})]}),Object(y.jsx)(N.a,{disabled:!("default"!==x&&!H),variant:"contained",className:"col-1",onClick:function(){!function(e){var t=a.find((function(t){return t.item===e})),c=a.filter((function(t){return t.item!==e}));n(c),h("default");var s={item:e,price:t.price,count:1,totalPrice:t.price};g([].concat(Object(E.a)(v),[s]))}(x)},children:"Add"})]})]}),Object(y.jsx)(C.a,{className:"row ",children:Object(y.jsxs)(W.a,{children:[Object(y.jsxs)(A.a,{divider:!0,secondaryAction:v.length>0&&Object(y.jsx)(m.a,{disabled:H,onClick:function(){g([]),n(i)},children:Object(y.jsx)(R.a,{})}),children:[Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Item"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Price"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Kilo"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Total"})]}),v.length>0?v.map((function(e,t){return Object(y.jsx)(T,{transactionState:H,fruitItem:e.item,fruitPrice:e.price,fruitCount:e.count,fruitTotal:e.totalPrice,handleRemove:re,handleCount:ie},t)})):Object(y.jsx)(C.a,{className:" text-center",children:"No Fruits"})]})}),Object(y.jsx)(C.a,{className:"justify-content-end d-flex",children:Object(y.jsx)(N.a,{className:"",disabled:!(!H&&0!==v.length),variant:"contained",onClick:function(){!function(){var e=0;for(var a in v)e+=v[a].totalPrice;var c={name:t.name,userId:t._id,items:v,total:e};ee(c),J(!0)}()},children:"Confirm"})}),Object(y.jsx)(C.a,{children:H&&Object(y.jsx)(M,{handleBuy:le,data:X,showTransaction:J})})]})},J=(a(157),a(14));var _=function(){var e="https://react-mongo-lloyd.herokuapp.com/api/",t=Object(c.useState)([]),a=Object(j.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(!1),i=Object(j.a)(r,2),u=i[0],x=i[1],h=Object(c.useState)(!1),m=Object(j.a)(h,2),f=m[0],p=m[1],v=Object(c.useState)(!1),g=Object(j.a)(v,2),N=g[0],w=g[1],E=Object(c.useState)(!1),P=Object(j.a)(E,2),F=P[0],I=P[1],A=Object(c.useState)(!1),L=Object(j.a)(A,2),R=L[0],T=L[1],B=Object(c.useState)(!1),W=Object(j.a)(B,2),M=W[0],z=W[1],D=Object(c.useState)(!1),K=Object(j.a)(D,2),U=K[0],$=K[1],_=Object(c.useState)(!1),Y=Object(j.a)(_,2),q=Y[0],G=Y[1],Q=Object(c.useState)(!1),V=Object(j.a)(Q,2),X=V[0],ee=V[1],te=Object(c.useState)(!1),ae=Object(j.a)(te,2),ce=ae[0],ne=ae[1],se=Object(c.useState)(!1),re=Object(j.a)(se,2),ie=re[0],le=re[1],oe=Object(c.useState)(!1),je=Object(j.a)(oe,2),ue=je[0],de=je[1],be=Object(c.useState)(!1),Oe=Object(j.a)(be,2),xe=Oe[0],he=Oe[1],me=Object(c.useState)(""),fe=Object(j.a)(me,2),pe=fe[0],ve=fe[1],ge=function(){var t=Object(o.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(!0),t.next=3,d.a.get("".concat(e,"items"));case 3:a=t.sent,s(a.data.data),x(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){ge()}),[]);var Ne=function(){var t=Object(o.a)(l.a.mark((function t(a,c,n,s,r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),p(!1),w(!1),T(!1),G(!1),z(!1),$(!1),""!==a&&""!==c&&""!==s&&""!==n){t.next=11;break}return console.log("empty"),G(!0),t.abrupt("return");case 11:if(ye(a)){t.next=14;break}return T(!0),t.abrupt("return");case 14:if(c===s){t.next=17;break}return z(!0),t.abrupt("return");case 17:return p(!0),t.next=20,d.a.post("".concat(e,"users/validate"),{email:a});case 20:if(null===t.sent.data.data){t.next=25;break}return $(!0),p(!1),t.abrupt("return");case 25:return t.next=27,d.a.post("".concat(e,"users"),{name:n,pass:c,email:a});case 27:200===t.sent.status&&(p(!1),w(!0),I(!0),I(!1));case 29:case"end":return t.stop()}}),t)})));return function(e,a,c,n,s){return t.apply(this,arguments)}}(),Ce=function(){var t=Object(o.a)(l.a.mark((function t(a,c,n){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),w(!1),G(!1),ee(!1),ne(!1),le(!1),de(!1),""!==a&&""!==c){t.next=10;break}return G(!0),t.abrupt("return");case 10:if(ye(a)){t.next=13;break}return de(!0),t.abrupt("return");case 13:return le(!0),t.next=16,d.a.post("".concat(e,"users/validate"),{email:a});case 16:if(null!==t.sent.data.data){t.next=21;break}return ee(!0),le(!1),t.abrupt("return");case 21:return t.next=23,d.a.post("".concat(e,"users/login"),{email:a,pass:c});case 23:if(null!==(s=t.sent).data.data){t.next=28;break}return le(!1),ne(!0),t.abrupt("return");case 28:ve(s.data.data),he(!0);case 30:case"end":return t.stop()}}),t)})));return function(e,a,c){return t.apply(this,arguments)}}(),ye=function(e){return/[a-zA-Z0-9!@#$%&'*+'-=]+@[a-zA-Z0-9!@#$%&'*+'-=]+\.[a-zA-Z0-9!@#$%&'*+'-=]+/.test(e)};return Object(y.jsx)(b.a,{children:Object(y.jsxs)(C.a,{className:"container-sm w-50 my-2 p-3 dark-border text",children:[q&&Object(y.jsxs)(O.a,{severity:"error",onClose:function(){G(!1)},children:["Please fill out all fields"," "]}),N&&Object(y.jsx)(O.a,{severity:"success",onClose:function(){w(!1)},children:"Registration successful"}),u?Object(y.jsx)("div",{className:"text-center",children:Object(y.jsx)(Z.a,{})}):Object(y.jsxs)(J.d,{children:[xe?Object(y.jsx)(J.b,{path:"/",element:Object(y.jsx)(J.a,{to:"/shop"})}):Object(y.jsx)(J.b,{path:"/",element:Object(y.jsx)(S,{handleLogin:Ce,loginLoading:ie,accountNotExists:X,setAccountNotExists:ee,loginFail:ce,setLoginFail:ne,invalidEmail:ue,setInvalidEmail:de,setFieldsEmpty:G})}),F?Object(y.jsx)(J.b,{path:"/register",element:Object(y.jsx)(J.a,{to:"/"})}):Object(y.jsx)(J.b,{path:"/register",element:Object(y.jsx)(k,{handleRegister:Ne,regLoading:f,invalidRegister:R,passwordMismatch:M,setPasswordMismatch:z,emailExists:U,setEmailExists:$,fieldsEmpty:q,setFieldsEmpty:G})}),xe?Object(y.jsx)(J.b,{path:"/shop",element:Object(y.jsx)(H,{currentUser:pe,fruits:n,setFruits:s})}):Object(y.jsx)(J.b,{path:"/shop",element:Object(y.jsx)(J.a,{to:"/"})})]})]})})},Y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,219)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};r.a.render(Object(y.jsx)(n.a.StrictMode,{children:Object(y.jsx)(_,{})}),document.getElementById("root")),Y()}},[[158,1,2]]]);
//# sourceMappingURL=main.99daf60f.chunk.js.map