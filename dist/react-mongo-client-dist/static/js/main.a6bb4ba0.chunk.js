(this["webpackJsonpreact-mongo"]=this["webpackJsonpreact-mongo"]||[]).push([[0],{127:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(43),r=a.n(s),i=(a(127),a(35)),l=a.n(i),o=a(51),j=a(7),u=a(38),b=a.n(u),d=a(46),O=a(198),x=a(210),h=a(201),m=a(209),f=a(60),p=a.n(f),v=a(61),g=a.n(v),N=a(205),C=a(207),y=a(1),S=function(e){var t=e.handleLogin,a=e.loginLoading,n=e.loginFail,s=e.invalidEmail,r=e.accountNotExists,i=e.setAccountNotExists,l=e.setLoginFail,o=e.setInvalidEmail,u=Object(c.useState)(""),b=Object(j.a)(u,2),f=b[0],v=b[1],S=Object(c.useState)(""),w=Object(j.a)(S,2),k=w[0],E=w[1],P=Object(c.useState)(!1),F=Object(j.a)(P,2),I=F[0],L=F[1];return Object(y.jsxs)(C.a,{className:"",children:[r&&Object(y.jsx)(O.a,{severity:"error",onClose:function(){i(!1)},children:"Account does not exist"}),n&&Object(y.jsx)(O.a,{severity:"error",onClose:function(){l(!1)},children:"Login failed"}),s&&Object(y.jsx)(O.a,{severity:"error",onClose:function(){o(!1)},children:"Invalid Email Address"}),a&&Object(y.jsx)(O.a,{severity:"info",children:"Logging in..."}),Object(y.jsxs)("form",{children:[Object(y.jsx)("h2",{children:"Login"}),Object(y.jsx)("label",{className:"h5",children:"Email"}),Object(y.jsx)(x.a,{fullWidth:!0,placeholder:"Email",value:f,onChange:function(e){v(e.target.value)}}),Object(y.jsx)("label",{className:"h5 mt-2",children:"Password"}),Object(y.jsx)(x.a,{fullWidth:!0,type:I?"text":"password",placeholder:"Password",value:k,onChange:function(e){E(e.target.value)},endAdornment:Object(y.jsx)(h.a,{position:"end",onClick:function(){L(!I)},children:Object(y.jsx)(m.a,{children:I?Object(y.jsx)(p.a,{}):Object(y.jsx)(g.a,{})})})}),Object(y.jsx)(N.a,{type:"submit",fullWidth:!0,className:"my-3",variant:"contained",onClick:function(e){t(f,k,e)},children:"Login"}),Object(y.jsx)(d.b,{to:{pathname:"./register"},children:"Don't have an account? Register here"})]})]})},w=function(e){var t=e.handleRegister,a=e.regLoading,n=e.invalidRegister,s=e.handleInvalidRegisterClose,r=e.passwordMismatch,i=e.setPasswordMismatch,l=e.emailExists,o=e.setEmailExists,u=Object(c.useState)(""),b=Object(j.a)(u,2),f=b[0],v=b[1],C=Object(c.useState)(""),S=Object(j.a)(C,2),w=S[0],k=S[1],E=Object(c.useState)(""),P=Object(j.a)(E,2),F=P[0],I=P[1],L=Object(c.useState)(""),A=Object(j.a)(L,2),R=A[0],W=A[1],T=Object(c.useState)(!1),z=Object(j.a)(T,2),B=z[0],M=z[1];return Object(y.jsxs)("div",{className:"",children:[l&&Object(y.jsxs)(O.a,{severity:"error",onClose:function(){o(!1)},children:["Email already exists"," "]}),a&&Object(y.jsx)(O.a,{severity:"info",children:" Registering... "}),n&&Object(y.jsx)(O.a,{severity:"error",onClose:function(){s()},children:"Invalid Email Address"}),Object(y.jsx)("h2",{children:"Register"}),Object(y.jsxs)("form",{children:[Object(y.jsx)("label",{className:"h5 d-block",children:"Name"}),Object(y.jsx)(x.a,{fullWidth:!0,placeholder:"Name",value:R,onChange:function(e){W(e.target.value)}}),Object(y.jsx)("label",{className:"h5 mt-2",children:"Email"}),Object(y.jsx)(x.a,{fullWidth:!0,type:"email",placeholder:"Email",value:f,onChange:function(e){v(e.target.value)}}),Object(y.jsx)("label",{className:"h5 mt-2",children:"Password"}),Object(y.jsx)(x.a,{fullWidth:!0,type:B?"text":"password",placeholder:"Password",value:w,onChange:function(e){k(e.target.value)},endAdornment:Object(y.jsx)(h.a,{position:"end",onClick:function(){M(!B)},children:Object(y.jsx)(m.a,{children:B?Object(y.jsx)(p.a,{}):Object(y.jsx)(g.a,{})})})}),Object(y.jsx)("label",{className:"h5 mt-2",children:"Confirm Password"}),Object(y.jsx)(x.a,{fullWidth:!0,type:B?"text":"password",placeholder:"Password",value:F,onChange:function(e){I(e.target.value)},endAdornment:Object(y.jsx)(h.a,{position:"end",onClick:function(){M(!B)},children:Object(y.jsx)(m.a,{children:B?Object(y.jsx)(p.a,{}):Object(y.jsx)(g.a,{})})})}),Object(y.jsx)(N.a,{className:"my-3",type:"submit",fullWidth:!0,variant:"contained",onClick:function(e){t(f,w,R,F,e)},children:"Register"})]}),r?Object(y.jsx)(O.a,{severity:"error",className:"my-3",onClose:function(){i(!1)},children:"Passwords do not match"}):"",Object(y.jsx)(d.b,{to:{pathname:"/"},children:"Have an account? Login here"})]})},k=a(92),E=a(16),P=a(211),F=a(204),I=function(e){var t=e.handleChangeCount,a=e.fruitCount;return Object(y.jsx)(P.a,{children:Object(y.jsx)(F.a,{size:"small",inputProps:{min:1},type:"number",label:"Count",id:"select-count",value:a,onChange:function(e){t(parseInt(e.target.value,10))}})})},L=a(199),A=a(73),R=a.n(A),W=function(e){var t=e.fruitItem,a=e.fruitPrice,n=e.handleRemove,s=e.fruitCount,r=e.handleCount,i=(e.fruitTotal,Object(c.useState)(s)),l=Object(j.a)(i,2),o=l[0],u=l[1];return Object(y.jsxs)(L.a,{divider:!0,secondaryAction:Object(y.jsx)(m.a,{onClick:function(){n(t)},children:Object(y.jsx)(R.a,{})}),children:[Object(y.jsx)(C.a,{className:"col-3 text-center",children:t}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:a}),Object(y.jsx)(I,{count:o,handleChangeCount:function(e){u(e),r(t,a,e)},fruitItem:t,fruitCount:s}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:a*o})]})},T=function(e){var t=e.item;return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(L.a,{divider:!0,children:[Object(y.jsx)(C.a,{className:"col-3 text-center",children:t.item}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:t.price}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:t.count}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:t.totalPrice})]})})},z=a(212),B=function(e){var t=e.data;return Object(y.jsxs)(y.Fragment,{children:["User: ",t.userName,Object(y.jsxs)(z.a,{children:[Object(y.jsxs)(L.a,{children:[Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Item"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Price"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Count"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Total Price"})]}),t.items.length>0?t.items.map((function(e,t){return Object(y.jsx)(T,{item:e},t)})):"",Object(y.jsxs)(L.a,{children:[Object(y.jsx)(C.a,{className:"col-3 text-center"}),Object(y.jsx)(C.a,{className:"col-3 text-center"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Final Bill"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:Object(y.jsx)("strong",{children:t.finalBill})})]})]})]})},M=a(196),D=a(200),U=a(202),Z=a(208),$=function(e){var t=e.currentUser,a=e.fruits,n=e.setFruits,s=Object(c.useState)(a),r=Object(j.a)(s,2),i=r[0],u=(r[1],"https://react-mongo-lloyd.herokuapp.com/api/"),d=function(){var e=Object(o.a)(l.a.mark((function e(a){var c,n,s,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in ee(!0),c=0,S)c+=S[n].totalPrice;return e.next=5,b.a.post("".concat(u,"transactions"),{name:t.name,userId:t._id,items:S,total:c});case 5:return s=e.sent,r=s.data.data.insertedId,e.next=9,b.a.get("".concat(u,"transactions/").concat(r));case 9:i=e.sent,Q(i.data),_(!0),ee(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=Object(c.useState)("default"),h=Object(j.a)(x,2),f=h[0],p=h[1],v=Object(c.useState)([]),g=Object(j.a)(v,2),S=g[0],w=g[1],F=Object(c.useState)(!1),I=Object(j.a)(F,2),A=I[0],T=I[1],$=Object(c.useState)(!1),H=Object(j.a)($,2),J=H[0],_=H[1],q=Object(c.useState)([]),G=Object(j.a)(q,2),K=G[0],Q=G[1],V=Object(c.useState)(!1),X=Object(j.a)(V,2),Y=X[0],ee=X[1],te=function(e){var t=i.filter((function(t){return t.item===e})),c=S.filter((function(t){return t.item!==e}));w(c);var s=t[0];n([].concat(Object(E.a)(a),[s]))},ae=function(e,t,a){var c=S.map((function(c){return c.item===e?Object(k.a)(Object(k.a)({},c),{},{count:a,totalPrice:t*a}):c}));w(c)};return Object(y.jsxs)(y.Fragment,{children:[A?Object(y.jsx)(O.a,{severity:"error",className:"mb-3",onClose:function(){T(!1)},children:"Fruit already added"}):"",Object(y.jsxs)(C.a,{className:"",children:[Object(y.jsx)(C.a,{className:"row justify-content-center",children:Object(y.jsxs)(C.a,{className:"",children:["Hello ",t.name]})}),Object(y.jsxs)(C.a,{className:"row justify-content-center w-50 m-auto",children:[Object(y.jsxs)(P.a,{className:"col-9",size:"small",children:[Object(y.jsx)(U.a,{id:"select-label-fruits",children:"Fruits"}),Object(y.jsxs)(M.a,{disabled:0===a.length,sx:{display:"inline"},labelId:"select-label-fruits",id:"select-fruits",value:f,label:"Fruits",onChange:function(e){p(e.target.value)},children:[Object(y.jsx)(D.a,{disabled:!0,value:"default",children:"Select Fruit"}),a.map((function(e,t){return Object(y.jsx)(D.a,{value:e.item,children:e.item},t)}))]})]}),Object(y.jsx)(N.a,{disabled:"default"===f,variant:"contained",className:"col-1",onClick:function(){!function(e){var t=a.find((function(t){return t.item===e})),c=a.filter((function(t){return t.item!==e}));console.log(c),n(c),p("default");var s={item:e,price:t.price,count:1,totalPrice:t.price};w([].concat(Object(E.a)(S),[s]))}(f)},children:"Add"})]})]}),Object(y.jsx)(C.a,{className:"row ",children:Object(y.jsxs)(z.a,{children:[Object(y.jsxs)(L.a,{divider:!0,secondaryAction:S.length>0?Object(y.jsx)(m.a,{onClick:function(){w([]),n(i),console.log(a)},children:Object(y.jsx)(R.a,{})}):"",children:[Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Item"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Price"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Count"}),Object(y.jsx)(C.a,{className:"col-3 text-center",children:"Total"})]}),S.length>0?S.map((function(e,t){return Object(y.jsx)(W,{fruitItem:e.item,fruitPrice:e.price,fruitCount:e.count,fruitTotal:e.totalPrice,handleRemove:te,handleCount:ae},t)})):Object(y.jsx)(C.a,{className:" text-center",children:"No Fruits"})]})}),Object(y.jsx)(C.a,{className:"justify-content-end d-flex",children:Object(y.jsx)(N.a,{className:"",disabled:!(!J&&0!==S.length),variant:"contained",onClick:function(){d()},children:"Buy"})}),Object(y.jsx)(C.a,{children:J?Object(y.jsx)(B,{data:K.data}):Y&&Object(y.jsx)("div",{className:"text-center",children:Object(y.jsx)(Z.a,{})})})]})},H=(a(155),a(14));var J=function(){var e="https://react-mongo-lloyd.herokuapp.com/api/",t=Object(c.useState)([]),a=Object(j.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(!1),i=Object(j.a)(r,2),u=i[0],x=i[1],h=Object(c.useState)(!1),m=Object(j.a)(h,2),f=m[0],p=m[1],v=Object(c.useState)(!1),g=Object(j.a)(v,2),N=g[0],k=g[1],E=Object(c.useState)(!1),P=Object(j.a)(E,2),F=P[0],I=P[1],L=Object(c.useState)(!1),A=Object(j.a)(L,2),R=A[0],W=A[1],T=Object(c.useState)(!1),z=Object(j.a)(T,2),B=z[0],M=z[1],D=Object(c.useState)(!1),U=Object(j.a)(D,2),J=U[0],_=U[1],q=Object(c.useState)(!1),G=Object(j.a)(q,2),K=G[0],Q=G[1],V=Object(c.useState)(!1),X=Object(j.a)(V,2),Y=X[0],ee=X[1],te=Object(c.useState)(!1),ae=Object(j.a)(te,2),ce=ae[0],ne=ae[1],se=Object(c.useState)(!1),re=Object(j.a)(se,2),ie=re[0],le=re[1],oe=Object(c.useState)(!1),je=Object(j.a)(oe,2),ue=je[0],be=je[1],de=Object(c.useState)(!1),Oe=Object(j.a)(de,2),xe=Oe[0],he=Oe[1],me=Object(c.useState)(""),fe=Object(j.a)(me,2),pe=fe[0],ve=fe[1],ge=function(){var t=Object(o.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(!0),t.next=3,b.a.get("".concat(e,"items"));case 3:a=t.sent,s(a.data.data),x(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){ge()}),[]);var Ne=function(){var t=Object(o.a)(l.a.mark((function t(a,c,n,s,r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),p(!1),k(!1),W(!1),Q(!1),M(!1),_(!1),""!==a&&""!==c&&""!==s&&""!==n){t.next=11;break}return console.log("empty"),Q(!0),t.abrupt("return");case 11:if(ye(a)){t.next=14;break}return W(!0),t.abrupt("return");case 14:if(c===s){t.next=17;break}return M(!0),t.abrupt("return");case 17:return p(!0),t.next=20,b.a.post("".concat(e,"users/validate"),{email:a});case 20:if(null===t.sent.data.data){t.next=25;break}return _(!0),p(!1),t.abrupt("return");case 25:return t.next=27,b.a.post("".concat(e,"users"),{name:n,pass:c,email:a});case 27:200===t.sent.status&&(p(!1),k(!0),I(!0),I(!1));case 29:case"end":return t.stop()}}),t)})));return function(e,a,c,n,s){return t.apply(this,arguments)}}(),Ce=function(){var t=Object(o.a)(l.a.mark((function t(a,c,n){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),k(!1),Q(!1),ee(!1),ne(!1),le(!1),be(!1),""!==a&&""!==c){t.next=10;break}return Q(!0),t.abrupt("return");case 10:if(ye(a)){t.next=13;break}return be(!0),t.abrupt("return");case 13:return le(!0),t.next=16,b.a.post("".concat(e,"users/validate"),{email:a});case 16:if(null!==t.sent.data.data){t.next=21;break}return ee(!0),le(!1),t.abrupt("return");case 21:return t.next=23,b.a.post("".concat(e,"users/login"),{email:a,pass:c});case 23:if(null!==(s=t.sent).data.data){t.next=28;break}return le(!1),ne(!0),t.abrupt("return");case 28:ve(s.data.data),he(!0);case 30:case"end":return t.stop()}}),t)})));return function(e,a,c){return t.apply(this,arguments)}}(),ye=function(e){return/[a-zA-Z0-9!@#$%&'*+'-=]+@[a-zA-Z0-9!@#$%&'*+'-=]+\.[a-zA-Z0-9!@#$%&'*+'-=]+/.test(e)};return Object(y.jsx)(d.a,{children:Object(y.jsxs)(C.a,{className:"container-sm w-50 my-2 p-3 dark-border text",children:[K&&Object(y.jsxs)(O.a,{severity:"error",onClose:function(){Q(!1)},children:["Please fill out all fields"," "]}),N&&Object(y.jsx)(O.a,{severity:"success",onClose:function(){k(!1)},children:"Registration successful"}),u?Object(y.jsx)("div",{className:"text-center",children:Object(y.jsx)(Z.a,{})}):Object(y.jsxs)(H.d,{children:[xe?Object(y.jsx)(H.b,{path:"/",element:Object(y.jsx)(H.a,{to:"/shop"})}):Object(y.jsx)(H.b,{path:"/",element:Object(y.jsx)(S,{handleLogin:Ce,loginLoading:ie,accountNotExists:Y,setAccountNotExists:ee,loginFail:ce,setLoginFail:ne,invalidEmail:ue,setInvalidEmail:be})}),F?Object(y.jsx)(H.b,{path:"/register",element:Object(y.jsx)(H.a,{to:"/"})}):Object(y.jsx)(H.b,{path:"/register",element:Object(y.jsx)(w,{handleRegister:Ne,regLoading:f,invalidRegister:R,passwordMismatch:B,setPasswordMismatch:M,emailExists:J,setEmailExists:_,fieldsEmpty:K,setFieldsEmpty:Q})}),xe?Object(y.jsx)(H.b,{path:"/shop",element:Object(y.jsx)($,{currentUser:pe,fruits:n,setFruits:s})}):Object(y.jsx)(H.b,{path:"/shop",element:Object(y.jsx)(H.a,{to:"/"})})]})]})})},_=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,215)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};r.a.render(Object(y.jsx)(n.a.StrictMode,{children:Object(y.jsx)(J,{})}),document.getElementById("root")),_()}},[[156,1,2]]]);
//# sourceMappingURL=main.a6bb4ba0.chunk.js.map