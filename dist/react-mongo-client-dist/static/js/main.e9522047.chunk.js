(this["webpackJsonpreact-mongo"]=this["webpackJsonpreact-mongo"]||[]).push([[0],{136:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(45),r=a.n(s),i=(a(136),a(16)),l=a.n(i),o=a(28),j=a(3),d=a(20),u=a.n(d),b=a(24),O=a(208),h=a(219),x=a(211),m=a(218),f=a(51),p=a.n(f),g=a(52),v=a.n(g),N=a(214),w=a(217),S=a(75),y=a(0),C=function(e){var t=e.handleLogin,a=e.loginLoading,n=e.loginFail,s=e.invalidEmail,r=e.accountNotExists,i=e.setAccountNotExists,l=e.setLoginFail,o=e.setInvalidEmail,d=e.setFieldsEmpty,u=e.showloginButton,f=e.clientId,g=e.onLoginSuccess,C=e.onLoginFailure,k=Object(c.useState)(""),I=Object(j.a)(k,2),P=I[0],E=I[1],F=Object(c.useState)(""),L=Object(j.a)(F,2),A=L[0],B=L[1],R=Object(c.useState)(!1),W=Object(j.a)(R,2),T=W[0],M=W[1];return Object(y.jsxs)(w.a,{className:"",children:[r&&Object(y.jsx)(O.a,{severity:"error",onClose:function(){i(!1)},children:"Account does not exist"}),n&&Object(y.jsx)(O.a,{severity:"error",onClose:function(){l(!1)},children:"Login failed"}),s&&Object(y.jsx)(O.a,{severity:"error",onClose:function(){o(!1)},children:"Invalid Email Address"}),a&&Object(y.jsx)(O.a,{severity:"info",children:"Logging in..."}),Object(y.jsxs)("form",{children:[Object(y.jsx)("h2",{children:"Login"}),Object(y.jsx)("label",{className:"h5",children:"Email"}),Object(y.jsx)(h.a,{fullWidth:!0,placeholder:"Email",value:P,onChange:function(e){E(e.target.value)}}),Object(y.jsx)("label",{className:"h5 mt-2",children:"Password"}),Object(y.jsx)(h.a,{fullWidth:!0,type:T?"text":"password",placeholder:"Password",value:A,onChange:function(e){B(e.target.value)},endAdornment:Object(y.jsx)(x.a,{position:"end",onClick:function(){M(!T)},children:Object(y.jsx)(m.a,{children:T?Object(y.jsx)(p.a,{}):Object(y.jsx)(v.a,{})})})}),Object(y.jsx)(b.b,{to:{pathname:"/forgot-password"},onClick:function(){d()},children:"Forgot password?"}),Object(y.jsx)(N.a,{type:"submit",fullWidth:!0,className:"my-3",variant:"contained",onClick:function(e){t(P,A,e)},children:"Login"}),Object(y.jsxs)(w.a,{className:"d-flex justify-content-between",children:[Object(y.jsx)(b.b,{to:{pathname:"/register"},onClick:function(){d()},children:"Don't have an account? Register here"}),u?Object(y.jsx)(S.GoogleLogin,{clientId:f,onSuccess:g,onFailure:C,cookiePolicy:"single_host_origin"}):null]})]})]})},k=a(205),I=a(209),P=function(e){var t=e.handleRegister,a=e.regLoading,n=e.invalidRegister,s=e.setInvalidRegister,r=e.passwordMismatch,i=e.setPasswordMismatch,l=e.emailExists,o=e.setEmailExists,d=e.setFieldsEmpty,u=e.nameInput,f=e.setNameInput,g=e.emailInput,w=e.setEmailInput,S=e.passInput,C=e.setPassInput,P=e.passConfirmInput,E=e.setPassConfirmInput,F=e.age,L=e.setAge,A=e.gender,B=e.setGender,R=Object(c.useState)(!1),W=Object(j.a)(R,2),T=W[0],M=W[1];return Object(y.jsxs)("div",{className:"",children:[r&&Object(y.jsx)(O.a,{severity:"error",className:"my-3",onClose:function(){i(!1)},children:"Passwords do not match"}),l&&Object(y.jsxs)(O.a,{severity:"error",onClose:function(){o(!1)},children:["Email already exists"," "]}),a&&Object(y.jsx)(O.a,{severity:"info",children:" Registering... "}),n&&Object(y.jsx)(O.a,{severity:"error",onClose:function(){s(!1)},children:"Invalid Email Address"}),Object(y.jsx)("h2",{children:"Register"}),Object(y.jsxs)("form",{children:[Object(y.jsx)("label",{className:"h5 d-block",children:"Name"}),Object(y.jsx)(h.a,{fullWidth:!0,placeholder:"Name",value:u,onChange:function(e){f(e.target.value)}}),Object(y.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(y.jsxs)("div",{className:"col-6 ",style:{paddingRight:"1vw"},children:[Object(y.jsx)("label",{className:"h5 d-block",children:"Gender"}),Object(y.jsxs)(k.a,{variant:"standard",fullWidth:!0,value:A,onChange:function(e){B(e.target.value)},children:[Object(y.jsx)(I.a,{value:"Male",children:"Male"}),Object(y.jsx)(I.a,{value:"Female",children:"Female"}),Object(y.jsx)(I.a,{value:"Other",children:"Other"})]})]}),Object(y.jsxs)("div",{className:"col-6",children:[Object(y.jsx)("label",{className:"h5 d-block",children:"Age"}),Object(y.jsx)(h.a,{fullWidth:!0,value:F,type:"number",inputProps:{min:16,max:150},onChange:function(e){L(e.target.value)}})]})]}),Object(y.jsx)("label",{className:"h5 mt-2",children:"Email"}),Object(y.jsx)(h.a,{fullWidth:!0,type:"email",placeholder:"Email",value:g,onChange:function(e){w(e.target.value)}}),Object(y.jsx)("label",{className:"h5 mt-2",children:"Password"}),Object(y.jsx)(h.a,{fullWidth:!0,type:T?"text":"password",placeholder:"Password",value:S,onChange:function(e){C(e.target.value)},endAdornment:Object(y.jsx)(x.a,{position:"end",onClick:function(){M(!T)},children:Object(y.jsx)(m.a,{children:T?Object(y.jsx)(p.a,{}):Object(y.jsx)(v.a,{})})})}),Object(y.jsx)("label",{className:"h5 mt-2",children:"Confirm Password"}),Object(y.jsx)(h.a,{fullWidth:!0,type:T?"text":"password",placeholder:"Password",value:P,onChange:function(e){E(e.target.value)},endAdornment:Object(y.jsx)(x.a,{position:"end",onClick:function(){M(!T)},children:Object(y.jsx)(m.a,{children:T?Object(y.jsx)(p.a,{}):Object(y.jsx)(v.a,{})})})}),Object(y.jsx)(N.a,{className:"my-3",type:"submit",fullWidth:!0,variant:"contained",onClick:function(e){t(e,u,A,F,g,S,P)},children:"Register"})]}),Object(y.jsx)(b.b,{to:{pathname:"/login"},onClick:function(){d()},children:"Have an account? Login here"})]})},E=a(99),F=a(17),L=a(221),A=a(224),B=function(e){var t=e.handleChangeCount,a=e.fruitCount,c=e.transactionState;return Object(y.jsx)(L.a,{children:Object(y.jsx)(A.a,{InputProps:{endAdornment:Object(y.jsx)(x.a,{position:"start",children:"kg"})},disabled:c,size:"small",inputProps:{min:1},type:"tel",label:"Kilo",id:"select-count",value:isNaN(a)?0:a,onChange:function(e){t(parseInt(e.target.value,10))}})})},R=a(210),W=a(81),T=a.n(W),M=function(e){var t=e.fruitItem,a=e.fruitPrice,n=e.handleRemove,s=e.fruitCount,r=e.handleCount,i=(e.fruitTotal,e.transactionState),l=Object(c.useState)(s),o=Object(j.a)(l,2),d=o[0],u=o[1];return Object(y.jsxs)(R.a,{divider:!0,secondaryAction:Object(y.jsx)(m.a,{disabled:i,onClick:function(){n(t)},children:Object(y.jsx)(T.a,{})}),children:[Object(y.jsx)(w.a,{className:"col-3 text-center",children:t}),Object(y.jsxs)(w.a,{className:"col-3 text-center",children:[" \u20b1",a]}),Object(y.jsx)(B,{transactionState:i,count:d,handleChangeCount:function(e){isNaN(e)&&(e=0),u(e),r(t,a,e)},fruitItem:t,fruitCount:s}),Object(y.jsxs)(w.a,{className:"col-3 text-center",children:["\u20b1",isNaN(d)?"":a*d]})]})},_=function(e){var t=e.item;return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(R.a,{divider:!0,children:[Object(y.jsx)(w.a,{className:"col-3 text-center",children:t.item}),Object(y.jsxs)(w.a,{className:"col-3 text-center",children:[" \u20b1",t.price]}),Object(y.jsxs)(w.a,{className:"col-3 text-center",children:[t.count," kg"]}),Object(y.jsxs)(w.a,{className:"col-3 text-center",children:[" \u20b1",t.totalPrice]})]})})},z=a(220),U=function(e){var t=e.data,a=e.showTransaction,c=e.handleBuy;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h2",{children:"Transaction"}),"User: ",t.name,Object(y.jsxs)(z.a,{children:[Object(y.jsxs)(R.a,{children:[Object(y.jsx)(w.a,{className:"col-3 text-center",children:"Item"}),Object(y.jsx)(w.a,{className:"col-3 text-center",children:"Price"}),Object(y.jsx)(w.a,{className:"col-3 text-center",children:"Kilo"}),Object(y.jsx)(w.a,{className:"col-3 text-center",children:"Total Price"})]}),t.items.length>0?t.items.map((function(e,t){return Object(y.jsx)(_,{item:e},t)})):"",Object(y.jsxs)(R.a,{children:[Object(y.jsx)(w.a,{className:"col-3 text-center",children:"Final Bill"}),Object(y.jsx)(w.a,{className:"col-3 text-center"}),Object(y.jsx)(w.a,{className:"col-3 text-center"}),Object(y.jsx)(w.a,{className:"col-3 text-center",children:Object(y.jsxs)("strong",{children:[" \u20b1",t.total]})})]})]}),Object(y.jsxs)(w.a,{className:"d-flex justify-content-between",children:[Object(y.jsx)(N.a,{variant:"contained",onClick:function(){a(!1)},children:"Edit"}),Object(y.jsx)(N.a,{variant:"contained",onClick:function(){c()},children:"Buy"})]})]})},H=function(e){var t=e.data,a=e.handleCloseModal;return Object(y.jsxs)(w.a,{children:[Object(y.jsx)("h2",{children:"Your Bill"}),"User: ",t.userName,Object(y.jsx)("br",{}),"Transaction Id: ",t._id,Object(y.jsxs)(z.a,{children:[Object(y.jsxs)(R.a,{children:[Object(y.jsx)(w.a,{className:"col-3 text-center",children:"Item"}),Object(y.jsx)(w.a,{className:"col-3 text-center",children:"Price"}),Object(y.jsx)(w.a,{className:"col-3 text-center",children:"Kilo"}),Object(y.jsx)(w.a,{className:"col-3 text-center",children:"Total Price"})]}),t.items.length>0?t.items.map((function(e,t){return Object(y.jsx)(_,{item:e},t)})):"",Object(y.jsxs)(R.a,{children:[Object(y.jsx)(w.a,{className:"col-3 text-center",children:"Final Bill"}),Object(y.jsx)(w.a,{className:"col-3 text-center"}),Object(y.jsx)(w.a,{className:"col-3 text-center"}),Object(y.jsx)(w.a,{className:"col-3 text-center",children:Object(y.jsx)("strong",{children:t.finalBill})})]})]}),Object(y.jsx)(w.a,{className:"",children:Object(y.jsx)(N.a,{variant:"contained",fullWidth:!0,onClick:function(){a()},children:"Close"})})]})},D=a(212),G=a(216),K=a(206),Z=function(e){var t=e.currentUser,a=e.fruits,n=e.setFruits,s=Object(c.useState)(a),r=Object(j.a)(s,2),i=r[0],d=(r[1],Object(c.useState)("default")),b=Object(j.a)(d,2),h=b[0],x=b[1],f=Object(c.useState)([]),p=Object(j.a)(f,2),g=p[0],v=p[1],S=Object(c.useState)(!1),C=Object(j.a)(S,2),P=C[0],A=C[1],B=Object(c.useState)(!1),W=Object(j.a)(B,2),_=W[0],Z=W[1],$=Object(c.useState)(!1),q=Object(j.a)($,2),J=q[0],Y=q[1],Q=Object(c.useState)([]),V=Object(j.a)(Q,2),X=V[0],ee=V[1],te=Object(c.useState)([]),ae=Object(j.a)(te,2),ce=ae[0],ne=ae[1],se="https://react-mongo-lloyd.herokuapp.com/api/",re=function(e){var t=i.filter((function(t){return t.item===e})),c=g.filter((function(t){return t.item!==e}));v(c);var s=t[0];n([].concat(Object(F.a)(a),[s]))},ie=function(e,t,a){var c=g.map((function(c){return c.item===e?Object(E.a)(Object(E.a)({},c),{},{count:a,totalPrice:t*a}):c}));v(c)},le=function(){var e=Object(o.a)(l.a.mark((function e(){var t,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue(!0),Y(!0),e.next=4,u.a.post("".concat(se,"transactions"),{name:X.name,userId:X.userId,items:X.items,total:X.total});case 4:return t=e.sent,a=t.data.data.insertedId,e.next=8,u.a.get("".concat(se,"transactions/").concat(a));case 8:c=e.sent,ne(c.data.data),Y(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=Object(c.useState)(!1),je=Object(j.a)(oe,2),de=je[0],ue=je[1],be=Object(c.useState)(!1),Oe=Object(j.a)(be,2),he=Oe[0],xe=Oe[1],me=function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(!0),e.next=3,u.a.get("".concat(se,"items"));case 3:t=e.sent,n(t.data.data),xe(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){me()}),[]),Object(y.jsx)("div",{className:"w-75 m-auto",children:he?Object(y.jsx)("div",{className:"loading-container w-50 text-center",children:Object(y.jsx)(G.a,{})}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(K.a,{open:de,children:Object(y.jsx)(w.a,{sx:{position:"absolute",width:"75%",top:"50%",left:"50%",transform:"translate(-50%,-50%)",bgcolor:"background.paper",boxShadow:24,padding:4},children:J?Object(y.jsx)("div",{className:"text-center",children:Object(y.jsx)(G.a,{})}):Object(y.jsx)(H,{data:ce,handleCloseModal:function(){ue(!1),Z(!1),v([]),n(i)}})})}),P?Object(y.jsx)(O.a,{severity:"error",className:"mb-3",onClose:function(){A(!1)},children:"Fruit already added"}):"",Object(y.jsxs)(w.a,{className:"",children:[Object(y.jsx)(w.a,{className:"d-flex justify-content-between",children:Object(y.jsx)(w.a,{className:"d-inline h2",children:"Shop"})}),Object(y.jsx)(w.a,{className:"row justify-content-center",children:Object(y.jsxs)(w.a,{className:"",children:["Hello ",t.name]})}),Object(y.jsxs)(w.a,{className:"row justify-content-center w-50 m-auto",children:[Object(y.jsxs)(L.a,{className:"col-9",size:"small",children:[Object(y.jsx)(D.a,{id:"select-label-fruits",children:"Fruits"}),Object(y.jsxs)(k.a,{disabled:!(0!==a.length&&!_),labelId:"select-label-fruits",id:"select-fruits",value:h,label:"Fruits",onChange:function(e){x(e.target.value)},children:[Object(y.jsx)(I.a,{disabled:!0,value:"default",children:"Select Fruit"}),a.map((function(e,t){return Object(y.jsx)(I.a,{value:e.item,children:e.item},t)}))]})]}),Object(y.jsx)(N.a,{disabled:!("default"!==h&&!_),variant:"contained",className:"col-1",onClick:function(){!function(e){var t=a.find((function(t){return t.item===e})),c=a.filter((function(t){return t.item!==e}));n(c),x("default");var s={item:e,price:t.price,count:1,totalPrice:t.price};v([].concat(Object(F.a)(g),[s]))}(h)},children:"Add"})]})]}),Object(y.jsx)(w.a,{className:"row ",children:Object(y.jsxs)(z.a,{children:[Object(y.jsxs)(R.a,{divider:!0,secondaryAction:g.length>0&&Object(y.jsx)(m.a,{disabled:_,onClick:function(){v([]),n(i)},children:Object(y.jsx)(T.a,{})}),children:[Object(y.jsx)(w.a,{className:"col-3 text-center",children:"Item"}),Object(y.jsx)(w.a,{className:"col-3 text-center",children:"Price"}),Object(y.jsx)(w.a,{className:"col-3 text-center",children:"Kilo"}),Object(y.jsx)(w.a,{className:"col-3 text-center",children:"Total"})]}),g.length>0?g.map((function(e,t){return Object(y.jsx)(M,{transactionState:_,fruitItem:e.item,fruitPrice:e.price,fruitCount:e.count,fruitTotal:e.totalPrice,handleRemove:re,handleCount:ie},t)})):Object(y.jsx)(w.a,{className:" text-center",children:"No Fruits Selected"})]})}),Object(y.jsx)(w.a,{className:"justify-content-end d-flex",children:Object(y.jsx)(N.a,{className:"",disabled:!(!_&&0!==g.length),variant:"contained",onClick:function(){!function(){var e=0;for(var a in g)e+=g[a].totalPrice;var c={name:t.name,userId:t._id,items:g,total:e};ee(c),Z(!0)}()},children:"Confirm"})}),Object(y.jsx)(w.a,{children:_&&Object(y.jsx)(U,{handleBuy:le,data:X,showTransaction:Z})})]})})},$=function(e){var t=e.showlogoutButton,a=e.clientId,c=e.onSignoutSuccess,n=e.handleLogout;return Object(y.jsxs)("nav",{className:"bg-white border p-1 d-flex justify-content-between",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{className:"d-inline-block",children:Object(y.jsx)(b.b,{to:{pathname:"/home"},className:"nav-link text-nowrap",children:"Home"})}),Object(y.jsx)("div",{className:"d-inline-block",children:Object(y.jsx)(b.b,{to:{pathname:"/shop"},className:"nav-link text-nowrap",children:"Shop"})})]}),t?Object(y.jsx)(S.GoogleLogout,{clientId:a,buttonText:"Sign Out",onLogoutSuccess:c}):Object(y.jsx)(N.a,{onClick:function(){n()},children:"Logout"})]})},q=function(e){var t=e.currentUser,a=Object(c.useState)([]),n=Object(j.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)(!1),d=Object(j.a)(i,2),b=d[0],O=d[1],h=function(){var e=Object(o.a)(l.a.mark((function e(){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),a=t._id,e.next=4,u.a.get("".concat("https://react-mongo-lloyd.herokuapp.com/api/","transactions/list/").concat(a));case 4:c=e.sent,O(!1),r(c.data.data);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){h()}),[]),Object(y.jsxs)("div",{className:"mx-3",children:[Object(y.jsx)("h2",{children:"Home"}),b?Object(y.jsx)("div",{className:"loading-container w-50 text-center",children:Object(y.jsx)(G.a,{})}):Object(y.jsx)("div",{className:"w-75 m-auto",children:s.map((function(e){return Object(y.jsxs)("div",{className:"transaction-container ",children:[Object(y.jsx)("h5",{children:"Item "}),Object(y.jsx)(z.a,{children:Object(y.jsxs)(R.a,{divider:!0,children:[Object(y.jsx)("div",{className:"col-3 text-center",children:"Item"}),Object(y.jsx)("div",{className:"col-3 text-center",children:"Price"}),Object(y.jsx)("div",{className:"col-3 text-center",children:"Kilo"}),Object(y.jsx)("div",{className:"col-3 text-center",children:"Total Price"})]})}),Object(y.jsxs)(z.a,{children:[e.items.map((function(e){return Object(y.jsxs)(R.a,{divider:!0,children:[Object(y.jsx)("div",{className:"col-3 text-center",children:e.item}),Object(y.jsxs)("div",{className:"col-3 text-center",children:["\u20b1",e.price]}),Object(y.jsx)("div",{className:"col-3 text-center",children:e.count}),Object(y.jsxs)("div",{className:"col-3 text-center",children:["\u20b1",e.totalPrice]})]},e.item)})),Object(y.jsxs)(R.a,{children:[Object(y.jsx)("div",{className:"col-3 text-center",children:"Final Bill"}),Object(y.jsx)("div",{className:"col-3 text-center"}),Object(y.jsx)("div",{className:"col-3 text-center"}),Object(y.jsx)("div",{className:"col-3 text-center"})]})]})]},e._id)}))})]})},J=(a(164),a(14)),Y=a(225),Q=a(120),V=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(!1),r=Object(j.a)(s,2),i=r[0],d=r[1],O=Object(c.useState)({state:!1}),x=Object(j.a)(O,2),m=x[0],f=x[1],p=Object(c.useState)({state:!1}),g=Object(j.a)(p,2),v=g[0],w=g[1],S=function(){var e=Object(o.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),d(!0),e.next=4,u.a.post("".concat("https://react-mongo-lloyd.herokuapp.com/api/","reset/"),{email:a});case 4:(c=e.sent).data.token?Q.a.send("reset_service","reset_form",{user_email:a,link:"https://marclloyd01.github.io/dist/react-mongo-client-dist/#/reset-password?auth=".concat(c.data.token)},"user_j4ULTrjbib35gu1MBHaei").then((function(e){d(!1),w({state:!0,message:"An email with instructions has been sent."})}),(function(e){d(!1),f({state:!0,message:"Email does not exist"})})):(d(!1),f({state:!0,message:"No account is associated with this email address"}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"dark-border vertical-center p-3 w-25",children:[Object(y.jsx)("h2",{children:"Forgot Password"}),Object(y.jsxs)("form",{onSubmit:function(e){return S(e)},children:[Object(y.jsxs)(L.a,{variant:"standard",fullWidth:!0,children:[Object(y.jsx)(D.a,{htmlFor:"email-input",children:"Email"}),Object(y.jsx)(h.a,{id:"email-input",error:m.state,className:"my-2",name:"user_email",value:a,onChange:function(e){n(e.target.value),f({state:!1}),w({state:!1})}}),m.state&&Object(y.jsx)(Y.a,{id:"email-input-text",error:m.state,children:m.message}),v.state&&Object(y.jsx)(Y.a,{id:"email-input-text",children:v.message})]}),Object(y.jsx)(b.b,{to:{pathname:"/login"},children:"Already have an account? Login here"}),Object(y.jsx)(N.a,{disabled:i,type:"submit",fullWidth:!0,variant:"contained",children:"Submit"})]})]})},X=function(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(""),r=Object(j.a)(s,2),i=r[0],d=r[1],O=Object(b.c)(),f=Object(j.a)(O,2),g=f[0],w=(f[1],Object(c.useState)(!1)),S=Object(j.a)(w,2),C=S[0],k=S[1],I=Object(c.useState)(""),P=Object(j.a)(I,2),E=P[0],F=P[1],L=Object(c.useState)(""),A=Object(j.a)(L,2),B=A[0],R=A[1],W=Object(c.useState)(""),T=Object(j.a)(W,2),M=T[0],_=T[1],z=Object(c.useState)({state:!1}),U=Object(j.a)(z,2),H=U[0],D=U[1],G=Object(c.useState)({state:!1}),K=Object(j.a)(G,2),Z=K[0],$=K[1],q=Object(c.useState)(!1),J=Object(j.a)(q,2),Q=J[0],V=J[1],X="https://react-mongo-lloyd.herokuapp.com/api/";Object(c.useEffect)((function(){R(g.get("auth"));var e=function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("".concat(X,"reset/verification"),null,{headers:{Authorization:"Bearer ".concat(g.get("auth"))}});case 2:null!==(t=e.sent).data.data&&(k(!0),_(t.data.data.email),F(t.data.data.name));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var ee=function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(!0),e.next=3,u.a.post("".concat(X,"reset/reset-password"),{email:M,newPassword:i},{headers:{Authorization:"Bearer ".concat(B)}});case 3:e.sent.data.data.acknowledged?($({state:!0,message:"Password changed successfully"}),D({state:!1})):(D({state:!0,message:"Error with changing password"}),$({state:!1}),V(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:C?Object(y.jsxs)("div",{className:"dark-border vertical-center p-3 w-25",children:[Object(y.jsx)("h2",{children:"Reset Password"}),Object(y.jsxs)("h4",{children:["Hello ",E]}),Object(y.jsx)(h.a,{disabled:!0,fullWidth:!0,className:"my-1",type:a?"text":"password",placeholder:"New Password",value:i,onChange:function(e){d(e.target.value)},endAdornment:Object(y.jsx)(x.a,{position:"end",onClick:function(){n(!a)},children:Object(y.jsx)(m.a,{children:a?Object(y.jsx)(p.a,{}):Object(y.jsx)(v.a,{})})})}),H.state&&Object(y.jsx)(Y.a,{error:H.state,children:H.message}),Z.state&&Object(y.jsx)(Y.a,{children:Z.message}),Object(y.jsx)(N.a,{disabled:Q,fullWidth:!0,variant:"contained",onClick:function(){ee()},children:"Confirm"})]}):""})};var ee=function(){var e="https://react-mongo-lloyd.herokuapp.com/api/",t=Object(c.useState)([]),a=Object(j.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(!1),i=Object(j.a)(r,2),d=i[0],h=i[1],x=Object(c.useState)(!1),m=Object(j.a)(x,2),f=m[0],p=m[1],g=Object(c.useState)(!1),v=Object(j.a)(g,2),N=v[0],w=v[1],S=Object(c.useState)(!1),k=Object(j.a)(S,2),I=k[0],E=k[1],F=Object(c.useState)(!1),L=Object(j.a)(F,2),A=L[0],B=L[1],R=Object(c.useState)(!1),W=Object(j.a)(R,2),T=W[0],M=W[1],_=Object(c.useState)(!1),z=Object(j.a)(_,2),U=z[0],H=z[1],D=Object(c.useState)(!1),K=Object(j.a)(D,2),Y=K[0],Q=K[1],ee=Object(c.useState)(!1),te=Object(j.a)(ee,2),ae=te[0],ce=te[1],ne=Object(c.useState)(!1),se=Object(j.a)(ne,2),re=se[0],ie=se[1],le=Object(c.useState)(!1),oe=Object(j.a)(le,2),je=oe[0],de=oe[1],ue=Object(c.useState)(!1),be=Object(j.a)(ue,2),Oe=be[0],he=be[1],xe=Object(c.useState)(!1),me=Object(j.a)(xe,2),fe=me[0],pe=me[1],ge=Object(c.useState)(""),ve=Object(j.a)(ge,2),Ne=ve[0],we=ve[1],Se=Object(c.useState)(""),ye=Object(j.a)(Se,2),Ce=ye[0],ke=ye[1],Ie=Object(c.useState)(""),Pe=Object(j.a)(Ie,2),Ee=Pe[0],Fe=Pe[1],Le=Object(c.useState)(""),Ae=Object(j.a)(Le,2),Be=Ae[0],Re=Ae[1],We=Object(c.useState)(""),Te=Object(j.a)(We,2),Me=Te[0],_e=Te[1],ze=Object(c.useState)(),Ue=Object(j.a)(ze,2),He=Ue[0],De=Ue[1],Ge=Object(c.useState)("Male"),Ke=Object(j.a)(Ge,2),Ze=Ke[0],$e=Ke[1],qe=function(){var t=Object(o.a)(l.a.mark((function t(a,c,n,s,r,i,o){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),p(!1),w(!1),B(!1),Q(!1),M(!1),H(!1),""!==r&&""!==i&&""!==o&&""!==c){t.next=10;break}return Q(!0),t.abrupt("return");case 10:if(Ye(r)){t.next=13;break}return B(!0),t.abrupt("return");case 13:if(i===o){t.next=16;break}return M(!0),t.abrupt("return");case 16:return p(!0),t.next=19,u.a.post("".concat(e,"users/validate"),{email:r});case 19:if(null===t.sent.data.data){t.next=24;break}return H(!0),p(!1),t.abrupt("return");case 24:return t.next=26,u.a.post("".concat(e,"users"),{name:c,pass:i,email:r,info:[{gender:n},{age:s}]});case 26:200===t.sent.status&&(p(!1),w(!0),E(!0),E(!1));case 28:case"end":return t.stop()}}),t)})));return function(e,a,c,n,s,r,i){return t.apply(this,arguments)}}(),Je=function(){var t=Object(o.a)(l.a.mark((function t(a,c,n){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),w(!1),Q(!1),ce(!1),ie(!1),de(!1),he(!1),""!==a&&""!==c){t.next=10;break}return Q(!0),t.abrupt("return");case 10:if(Ye(a)){t.next=13;break}return he(!0),t.abrupt("return");case 13:return de(!0),t.next=16,u.a.post("".concat(e,"users/validate"),{email:a});case 16:if(null!==t.sent.data.data){t.next=21;break}return ce(!0),de(!1),t.abrupt("return");case 21:return t.next=23,u.a.post("".concat(e,"users/login"),{email:a,pass:c});case 23:if(null!==(s=t.sent).data.data){t.next=28;break}return de(!1),ie(!0),t.abrupt("return");case 28:we(s.data.data),de(!1),pe(!0);case 31:case"end":return t.stop()}}),t)})));return function(e,a,c){return t.apply(this,arguments)}}(),Ye=function(e){return/[a-zA-Z0-9!@#$%&'*+'-=]+@[a-zA-Z0-9!@#$%&'*+'-=]+\.[a-zA-Z0-9!@#$%&'*+'-=]+/.test(e)},Qe="768770191011-bm2rl6eidg2nmg84615oq9qp7rsg0ms9.apps.googleusercontent.com",Ve=Object(c.useState)(!0),Xe=Object(j.a)(Ve,2),et=Xe[0],tt=Xe[1],at=Object(c.useState)(!1),ct=Object(j.a)(at,2),nt=ct[0],st=ct[1],rt=function(){var t=Object(o.a)(l.a.mark((function t(a){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a.profileObj),p(!1),w(!1),B(!1),Q(!1),M(!1),H(!1),h(!0),t.next=10,u.a.post("".concat(e,"users/validate"),{email:a.profileObj.email});case 10:null!==(c=t.sent).data.data?(console.log(c.data.data),we(c.data.data),pe(!0),h(!1),tt(!1),st(!0)):null===c.data.data&&(console.log("does not exist"),tt(!0),pe(!1),h(!1),Fe(a.profileObj.email),ke(a.profileObj.givenName),window.location="./#/register");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(y.jsxs)(b.a,{children:[fe&&Object(y.jsx)($,{clientId:Qe,showlogoutButton:nt,onSignoutSuccess:function(){alert("You have been logged out successfully"),console.clear(),tt(!0),st(!1),pe(!1),we()},handleLogout:function(){we(),pe(!1)}}),d?Object(y.jsx)("div",{className:"loading-container w-50 text-center",children:Object(y.jsx)(G.a,{})}):Object(y.jsxs)(J.d,{children:[Object(y.jsx)(J.b,{exact:!0,path:"/",element:Object(y.jsx)(J.a,{to:"/login"})}),Object(y.jsx)(J.b,{path:"/login",element:fe?Object(y.jsx)(J.a,{to:"/home"}):Object(y.jsxs)("div",{className:"dark-border vertical-center p-3",children:[Y&&Object(y.jsxs)(O.a,{severity:"error",onClose:function(){Q(!1)},children:["Please fill out all fields"," "]}),N&&Object(y.jsx)(O.a,{severity:"success",onClose:function(){w(!1)},children:"Registration successful"}),Object(y.jsx)(C,{handleLogin:Je,loginLoading:je,accountNotExists:ae,setAccountNotExists:ce,loginFail:re,setLoginFail:ie,invalidEmail:Oe,setInvalidEmail:he,setFieldsEmpty:Q,showloginButton:et,clientId:Qe,onLoginSuccess:rt,onLoginFailure:function(e){p(!1),w(!1),B(!1),Q(!1),M(!1),H(!1),console.log("Login Failed:",e)}})]})}),I?Object(y.jsx)(J.b,{path:"/register",element:Object(y.jsx)(J.a,{to:"/"})}):Object(y.jsx)(J.b,{path:"/register",element:Object(y.jsx)("div",{className:"dark-border vertical-center p-3",children:Object(y.jsx)(P,{handleRegister:qe,regLoading:f,invalidRegister:A,setInvalidRegister:B,passwordMismatch:T,setPasswordMismatch:M,emailExists:U,setEmailExists:H,fieldsEmpty:Y,setFieldsEmpty:Q,nameInput:Ce,setNameInput:ke,emailInput:Ee,setEmailInput:Fe,passInput:Be,setPassInput:Re,passConfirmInput:Me,setPassConfirmInput:_e,age:He,setAge:De,gender:Ze,setGender:$e})})}),Object(y.jsx)(J.b,{path:"/home",element:fe?Object(y.jsx)(q,{currentUser:Ne}):Object(y.jsx)(J.a,{to:"/login"})}),Object(y.jsx)(J.b,{path:"/shop",element:fe?Object(y.jsx)(Z,{currentUser:Ne,fruits:n,setFruits:s}):Object(y.jsx)(J.a,{to:"/login"})}),Object(y.jsx)(J.b,{path:"/forgot-password",element:Object(y.jsx)(V,{})}),Object(y.jsx)(J.b,{path:"/reset-password",element:Object(y.jsx)(X,{})})]})]})},te=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,227)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};r.a.render(Object(y.jsxs)(n.a.StrictMode,{children:[Object(y.jsx)("div",{className:"g-signin"}),Object(y.jsx)(ee,{})]}),document.getElementById("root")),te()}},[[165,1,2]]]);
//# sourceMappingURL=main.e9522047.chunk.js.map