(this["webpackJsonpreact-mongo"]=this["webpackJsonpreact-mongo"]||[]).push([[0],{122:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(41),r=a.n(s),i=(a(122),a(35)),l=a.n(i),o=a(51),j=a(7),u=a(47),b=a.n(u),d=a(46),h=a(54),x=a(200),O=a(1),m=function(e){var t=e.handleLogin,a=e.loginLoading,n=e.loginFail,s=e.handleCloseLog,r=e.invalidEmail,i=e.handleCloseEmail,l=Object(c.useState)(""),o=Object(j.a)(l,2),u=o[0],b=o[1],m=Object(c.useState)(""),f=Object(j.a)(m,2),g=f[0],p=f[1],v=Object(c.useState)(!1),N=Object(j.a)(v,2),C=N[0],w=N[1];return Object(O.jsxs)(x.a,{className:"",children:[n?Object(O.jsxs)(x.a,{className:"alert-box bg-light-red p-3",children:["Login failed",Object(O.jsx)(h.a,{className:"align-right-icon",onClick:function(){s()}})]}):"",r?Object(O.jsxs)(x.a,{className:"alert-box bg-light-red p-3",children:["Invalid Email Address",Object(O.jsx)(h.a,{className:"align-right-icon",onClick:function(){i()}})]}):"",a?Object(O.jsx)(x.a,{className:"alert-box p-3 bg-primary text-white",children:"Logging in..."}):"",Object(O.jsxs)(x.a,{className:"",children:[Object(O.jsx)("h2",{children:"Login"}),Object(O.jsx)("label",{className:"h5",children:"Email"}),Object(O.jsx)("input",{type:"text",className:"form-control",placeholder:"Email",value:u,onChange:function(e){b(e.target.value)}}),Object(O.jsx)("label",{className:"h5",children:"Password"}),Object(O.jsx)("input",{type:C?"text":"password",className:"form-control",placeholder:"Password",value:g,onChange:function(e){p(e.target.value)}}),Object(O.jsx)("input",{type:"checkbox",checked:C,onChange:function(){w(!C)},id:"passCheckBox"}),Object(O.jsx)("label",{htmlFor:"passCheckBox",children:"Show password"}),Object(O.jsx)("button",{className:"btn text-white login-register-button my-2 d-block w-100",onClick:function(e){t(u,g)},children:"Login"}),Object(O.jsx)(d.b,{to:{pathname:"./register"},className:"d-block",children:"Don't have an account? Register here"})]})]})},f=a(194),g=function(e){var t=e.handleRegister,a=e.regLoading,n=e.regSuccess,s=e.handleCloseReg,r=(e.handleInvalidRegister,e.invalidRegister),i=e.handleInvalidRegisterClose,l=e.passwordMismatch,o=e.setPasswordMismatch,u=Object(c.useState)(""),b=Object(j.a)(u,2),x=b[0],m=b[1],g=Object(c.useState)(""),p=Object(j.a)(g,2),v=p[0],N=p[1],C=Object(c.useState)(""),w=Object(j.a)(C,2),k=w[0],S=w[1],y=Object(c.useState)(""),P=Object(j.a)(y,2),I=P[0],R=P[1],F=Object(c.useState)(!1),L=Object(j.a)(F,2),E=L[0],B=L[1];return Object(O.jsxs)("div",{className:"",children:[a?Object(O.jsx)("div",{className:"alert-box bg-primary p-3 text-white",children:"Registering..."}):"",n?Object(O.jsxs)("div",{className:"alert-box bg-light-green p-3",children:["Registration successful",Object(O.jsx)(h.a,{className:"align-right-icon",onClick:function(){s()}})]}):"",r?Object(O.jsxs)("div",{className:"alert-box bg-light-red p-3",children:["Invalid Email Address",Object(O.jsx)(h.a,{className:"align-right-icon",onClick:function(){i()}})]}):"",Object(O.jsx)("h2",{children:"Register"}),Object(O.jsx)("label",{className:"h5 d-block",children:"Name"}),Object(O.jsx)("input",{type:"text",className:"form-control",placeholder:"Name",value:I,onChange:function(e){R(e.target.value)}}),Object(O.jsx)("label",{className:"h5 mt-2",children:"Email"}),Object(O.jsx)("input",{type:"email",className:"form-control",placeholder:"Email",value:x,onChange:function(e){m(e.target.value)}}),Object(O.jsx)("label",{className:"h5 mt-2",children:"Password"}),Object(O.jsx)("input",{type:E?"text":"password",className:"form-control",placeholder:"Password",value:v,onChange:function(e){N(e.target.value)}}),Object(O.jsx)("label",{className:"h5 mt-2",children:"Confirm Password"}),Object(O.jsx)("input",{type:E?"text":"password",className:"form-control",placeholder:"Password",value:k,onChange:function(e){S(e.target.value)}}),Object(O.jsx)("input",{className:"mt-2",type:"checkbox",checked:E,onChange:function(){B(!E)},id:"passCheckBox"}),Object(O.jsx)("label",{htmlFor:"passCheckBox",children:"Show password"}),l?Object(O.jsx)(f.a,{severity:"error",className:"my-3",onClose:function(){o(!1)},children:"Passwords do not match"}):"",Object(O.jsx)(d.b,{to:{pathname:""},children:Object(O.jsx)("button",{className:"btn text-white login-register-button my-2 d-block w-100",onClick:function(){t(x,v,I,k)},children:"Register"})}),Object(O.jsx)(d.b,{to:{pathname:"/"},children:"Have an account? Login here"})]})},p=a(85),v=a(16),N=a(205),C=a(199),w=function(e){var t=e.handleChangeCount,a=e.fruitCount;return Object(O.jsx)(N.a,{children:Object(O.jsx)(C.a,{size:"small",inputProps:{min:1},type:"number",label:"Count",id:"select-count",value:a,onChange:function(e){t(parseInt(e.target.value,10))}})})},k=a(195),S=a(204),y=a(71),P=a.n(y),I=function(e){var t=e.fruitItem,a=e.fruitPrice,n=e.handleRemove,s=e.fruitCount,r=e.handleCount,i=(e.fruitTotal,Object(c.useState)(s)),l=Object(j.a)(i,2),o=l[0],u=l[1];return Object(O.jsxs)(k.a,{divider:!0,secondaryAction:Object(O.jsx)(S.a,{onClick:function(){n(t)},children:Object(O.jsx)(P.a,{})}),children:[Object(O.jsx)(x.a,{className:"col-3 text-center",children:t}),Object(O.jsx)(x.a,{className:"col-3 text-center",children:a}),Object(O.jsx)(w,{count:o,handleChangeCount:function(e){u(e),r(t,a,e)},fruitItem:t,fruitCount:s}),Object(O.jsx)(x.a,{className:"col-3 text-center",children:a*o})]})},R=function(e){var t=e.item;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(k.a,{divider:!0,children:[Object(O.jsx)(x.a,{className:"col-3 text-center",children:t.item}),Object(O.jsx)(x.a,{className:"col-3 text-center",children:t.price}),Object(O.jsx)(x.a,{className:"col-3 text-center",children:t.count}),Object(O.jsx)(x.a,{className:"col-3 text-center",children:t.totalPrice})]})})},F=a(206),L=function(e){var t=e.data;return Object(O.jsxs)(O.Fragment,{children:["User: ",t.userName,Object(O.jsxs)(F.a,{children:[Object(O.jsxs)(k.a,{children:[Object(O.jsx)(x.a,{className:"col-3 text-center",children:"Item"}),Object(O.jsx)(x.a,{className:"col-3 text-center",children:"Price"}),Object(O.jsx)(x.a,{className:"col-3 text-center",children:"Count"}),Object(O.jsx)(x.a,{className:"col-3 text-center",children:"Total Price"})]}),t.items.length>0?t.items.map((function(e,t){return Object(O.jsx)(R,{item:e},t)})):"",Object(O.jsxs)(k.a,{children:[Object(O.jsx)(x.a,{className:"col-3 text-center"}),Object(O.jsx)(x.a,{className:"col-3 text-center"}),Object(O.jsx)(x.a,{className:"col-3 text-center",children:"Final Bill"}),Object(O.jsx)(x.a,{className:"col-3 text-center",children:Object(O.jsx)("strong",{children:t.finalBill})})]})]})]})},E=a(192),B=a(196),A=a(201),T=a(197),z=a(203),M=function(e){var t=e.currentUser,a=e.fruits,n="https://react-mongo-lloyd.herokuapp.com/api/",s=function(){var e=Object(o.a)(l.a.mark((function e(){var a,c,s,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c in V(!0),a=0,g)a+=g[c].totalPrice;return e.next=5,b.a.post("".concat(n,"transactions"),{name:t.name,userId:t._id,items:g,total:a});case 5:return s=e.sent,r=s.data.data.insertedId,e.next=9,b.a.get("".concat(n,"transactions/").concat(r));case 9:i=e.sent,q(i.data),D(!0),V(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=Object(c.useState)("apple"),i=Object(j.a)(r,2),u=i[0],d=i[1],h=Object(c.useState)([]),m=Object(j.a)(h,2),g=m[0],C=m[1],w=Object(c.useState)(!1),y=Object(j.a)(w,2),R=y[0],M=y[1],U=Object(c.useState)(!1),Z=Object(j.a)(U,2),$=Z[0],D=Z[1],H=Object(c.useState)([]),J=Object(j.a)(H,2),_=J[0],q=J[1],G=Object(c.useState)(!1),K=Object(j.a)(G,2),Q=K[0],V=K[1],W=function(e){var t=g.filter((function(t){return t.item!==e}));console.log(t),console.log(e),C(t)},X=function(e,t,a){var c=g.map((function(c){return c.item===e?Object(p.a)(Object(p.a)({},c),{},{count:a,totalPrice:t*a}):c}));C(c),console.log(c)};return Object(O.jsxs)(O.Fragment,{children:[R?Object(O.jsx)(f.a,{severity:"error",className:"mb-3",onClose:function(){M(!1)},children:"Fruit already added"}):"",Object(O.jsxs)(x.a,{className:"row justify-content-center w-50 m-auto",children:[Object(O.jsxs)(x.a,{children:["Hello ",t.name]}),Object(O.jsxs)(N.a,{className:"col-9",size:"small",children:[Object(O.jsx)(T.a,{id:"select-label-fruits",children:"Fruits"}),a.length>0?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(E.a,{sx:{display:"inline"},labelId:"select-label-fruits",id:"select-fruits",value:u,label:"Fruits",onChange:function(e){d(e.target.value)},children:a.map((function(e,t){return Object(O.jsx)(B.a,{value:e.item,children:e.item},t)}))})}):""]}),Object(O.jsx)(A.a,{variant:"contained",className:"col-1",onClick:function(){!function(e){var t=a.find((function(t){return t.item===e}));for(var c in console.log(t.price),g)if(e===g[c].item)return void M(!0);M(!1);var n={item:e,price:t.price,count:1,totalPrice:t.price};console.log(n),C([].concat(Object(v.a)(g),[n]))}(u)},children:"Add"})]}),Object(O.jsx)(x.a,{className:"row ",children:Object(O.jsxs)(F.a,{children:[Object(O.jsxs)(k.a,{divider:!0,secondaryAction:g.length>0?Object(O.jsx)(S.a,{onClick:function(){C([])},children:Object(O.jsx)(P.a,{})}):"",children:[Object(O.jsx)(x.a,{className:"col-3 text-center",children:"Item"}),Object(O.jsx)(x.a,{className:"col-3 text-center",children:"Price"}),Object(O.jsx)(x.a,{className:"col-3 text-center",children:"Count"}),Object(O.jsx)(x.a,{className:"col-3 text-center",children:"Total"})]}),g.length>0?g.map((function(e,t){return Object(O.jsx)(I,{fruitItem:e.item,fruitPrice:e.price,fruitCount:e.count,fruitTotal:e.totalPrice,handleRemove:W,handleCount:X},t)})):"No Items"]})}),Object(O.jsx)(x.a,{className:"",children:Object(O.jsx)(A.a,{variant:"contained",onClick:function(){s()},children:"Buy"})}),Object(O.jsx)(x.a,{children:$?Object(O.jsx)(L,{data:_.data}):Q?Object(O.jsx)("div",{className:"text-center",children:Object(O.jsx)(z.a,{})}):""})]})},U=(a(152),a(14));var Z=function(){var e="https://react-mongo-lloyd.herokuapp.com/api/",t=Object(c.useState)([]),a=Object(j.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(!1),i=Object(j.a)(r,2),u=i[0],h=i[1],f=Object(c.useState)(!1),p=Object(j.a)(f,2),v=p[0],N=p[1],C=Object(c.useState)(!1),w=Object(j.a)(C,2),k=w[0],S=w[1],y=Object(c.useState)(!1),P=Object(j.a)(y,2),I=P[0],R=P[1],F=Object(c.useState)(!1),L=Object(j.a)(F,2),E=L[0],B=L[1],A=Object(c.useState)(!1),T=Object(j.a)(A,2),Z=T[0],$=T[1],D=Object(c.useState)(!1),H=Object(j.a)(D,2),J=H[0],_=H[1],q=Object(c.useState)(!1),G=Object(j.a)(q,2),K=G[0],Q=G[1],V=Object(c.useState)(""),W=Object(j.a)(V,2),X=W[0],Y=W[1],ee=function(){var t=Object(o.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),t.next=3,b.a.get("".concat(e,"items"));case 3:a=t.sent,s(a.data.data),h(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){ee()}),[]);var te=function(){var t=Object(o.a)(l.a.mark((function t(a,c,n,s){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(S(!1),N(!0),R(!1),B(!1),!ie(a)){t.next=18;break}if(c===s){t.next=9;break}return N(!1),B(!0),t.abrupt("return");case 9:return t.next=11,b.a.post("".concat(e,"users"),{name:n,pass:c,email:a});case 11:t.sent,N(!1),S(!0),R(!1),B(!1),t.next=19;break;case 18:ae();case 19:case"end":return t.stop()}}),t)})));return function(e,a,c,n){return t.apply(this,arguments)}}(),ae=function(){N(!1),R(!0),S(!1)},ce=function(){var t=Object(o.a)(l.a.mark((function t(a,c){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if($(!1),_(!0),Q(!1),!ie(a)){t.next=10;break}return t.next=6,b.a.post("".concat(e,"users/login"),{email:a,pass:c});case 6:null===(n=t.sent).data.data?se():re(n.data),t.next=11;break;case 10:ne();case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),ne=function(){_(!1),Q(!0),$(!1)},se=function(){console.log("no account found"),Y(null),_(!1),Q(!1),$(!0)},re=function(e){_(!1),$(!1),Q(!1),Y(e.data),window.location.replace("./#/shop")},ie=function(e){return/[a-zA-Z0-9!@#$%&'*+'-=]+@[a-zA-Z0-9!@#$%&'*+'-=]+\.[a-zA-Z0-9!@#$%&'*+'-=]+/.test(e)};return Object(O.jsx)(d.a,{children:Object(O.jsx)(x.a,{className:"container-sm w-50 my-2 p-3 dark-border text",children:u?Object(O.jsx)("div",{className:"text-center",children:Object(O.jsx)(z.a,{})}):Object(O.jsxs)(U.c,{children:[Object(O.jsx)(U.a,{path:"/",element:Object(O.jsx)(m,{handleLogin:ce,setRegSuccess:S,loginLoading:J,loginFail:Z,invalidEmail:K,handleCloseLog:function(){$(!1)},handleCloseEmail:function(){Q(!1)}})}),Object(O.jsx)(U.a,{path:"/register",element:Object(O.jsx)(g,{handleRegister:te,regLoading:v,handleCloseReg:function(){S(!1)},regSuccess:k,handleInvalidRegister:ae,invalidRegister:I,handleInvalidRegisterClose:function(){R(!1)},passwordMismatch:E,setPasswordMismatch:B})}),Object(O.jsx)(U.a,{path:"/shop",element:Object(O.jsx)(M,{currentUser:X,fruits:n})})]})})})},$=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,210)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};r.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(Z,{})}),document.getElementById("root")),$()}},[[153,1,2]]]);
//# sourceMappingURL=main.68933d94.chunk.js.map