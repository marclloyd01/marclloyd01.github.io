(this["webpackJsonpreact-mongo"]=this["webpackJsonpreact-mongo"]||[]).push([[0],{122:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(42),r=a.n(s),l=(a(122),a(35)),i=a.n(l),o=a(52),j=a(7),u=a(48),b=a.n(u),d=a(40),h=a(47),O=a(206),x=a(1),m=function(e){var t=e.handleLogin,a=e.loginLoading,n=e.loginFail,s=e.handleCloseLog,r=e.invalidEmail,l=e.handleCloseEmail,i=Object(c.useState)(""),o=Object(j.a)(i,2),u=o[0],b=o[1],m=Object(c.useState)(""),f=Object(j.a)(m,2),g=f[0],p=f[1],v=Object(c.useState)(!1),N=Object(j.a)(v,2),C=N[0],w=N[1];return Object(x.jsxs)(O.a,{className:"",children:[n?Object(x.jsxs)(O.a,{className:"alert-box bg-light-red p-3",children:["Login failed",Object(x.jsx)(h.a,{className:"align-right-icon",onClick:function(){s()}})]}):"",r?Object(x.jsxs)(O.a,{className:"alert-box bg-light-red p-3",children:["Invalid Email Address",Object(x.jsx)(h.a,{className:"align-right-icon",onClick:function(){l()}})]}):"",a?Object(x.jsx)(O.a,{className:"alert-box p-3 bg-primary text-white",children:"Logging in..."}):"",Object(x.jsxs)(O.a,{className:"",children:[Object(x.jsx)("h2",{children:"Login"}),Object(x.jsx)("label",{className:"h5",children:"Email"}),Object(x.jsx)("input",{type:"text",className:"form-control",placeholder:"Email",value:u,onChange:function(e){b(e.target.value)}}),Object(x.jsx)("label",{className:"h5",children:"Password"}),Object(x.jsx)("input",{type:C?"text":"password",className:"form-control",placeholder:"Password",value:g,onChange:function(e){p(e.target.value)}}),Object(x.jsx)("input",{type:"checkbox",checked:C,onChange:function(){w(!C)},id:"passCheckBox"}),Object(x.jsx)("label",{htmlFor:"passCheckBox",children:"Show password"}),Object(x.jsx)("button",{className:"btn text-white login-register-button my-2 d-block w-100",onClick:function(e){t(u,g)},children:"Login"}),Object(x.jsx)(d.b,{to:{pathname:"./register"},className:"d-block",children:"Don't have an account? Register here"})]})]})},f=a(200),g=function(e){var t=e.handleRegister,a=e.regLoading,n=(e.handleCloseReg,e.handleInvalidRegister,e.invalidRegister),s=e.handleInvalidRegisterClose,r=e.passwordMismatch,l=e.setPasswordMismatch,i=Object(c.useState)(""),o=Object(j.a)(i,2),u=o[0],b=o[1],O=Object(c.useState)(""),m=Object(j.a)(O,2),g=m[0],p=m[1],v=Object(c.useState)(""),N=Object(j.a)(v,2),C=N[0],w=N[1],k=Object(c.useState)(""),y=Object(j.a)(k,2),S=y[0],P=y[1],I=Object(c.useState)(!1),R=Object(j.a)(I,2),F=R[0],L=R[1];return Object(x.jsxs)("div",{className:"",children:[a?Object(x.jsx)("div",{className:"alert-box bg-primary p-3 text-white",children:"Registering..."}):"",n?Object(x.jsxs)("div",{className:"alert-box bg-light-red p-3",children:["Invalid Email Address",Object(x.jsx)(h.a,{className:"align-right-icon",onClick:function(){s()}})]}):"",Object(x.jsx)("h2",{children:"Register"}),Object(x.jsx)("label",{className:"h5 d-block",children:"Name"}),Object(x.jsx)("input",{type:"text",className:"form-control",placeholder:"Name",value:S,onChange:function(e){P(e.target.value)}}),Object(x.jsx)("label",{className:"h5 mt-2",children:"Email"}),Object(x.jsx)("input",{type:"email",className:"form-control",placeholder:"Email",value:u,onChange:function(e){b(e.target.value)}}),Object(x.jsx)("label",{className:"h5 mt-2",children:"Password"}),Object(x.jsx)("input",{type:F?"text":"password",className:"form-control",placeholder:"Password",value:g,onChange:function(e){p(e.target.value)}}),Object(x.jsx)("label",{className:"h5 mt-2",children:"Confirm Password"}),Object(x.jsx)("input",{type:F?"text":"password",className:"form-control",placeholder:"Password",value:C,onChange:function(e){w(e.target.value)}}),Object(x.jsx)("input",{className:"mt-2",type:"checkbox",checked:F,onChange:function(){L(!F)},id:"passCheckBox"}),Object(x.jsx)("label",{htmlFor:"passCheckBox",children:"Show password"}),r?Object(x.jsx)(f.a,{severity:"error",className:"my-3",onClose:function(){l(!1)},children:"Passwords do not match"}):"",Object(x.jsx)(d.b,{to:{pathname:""},children:Object(x.jsx)("button",{className:"btn text-white login-register-button my-2 d-block w-100",onClick:function(){t(u,g,S,C)},children:"Register"})}),Object(x.jsx)(d.b,{to:{pathname:"/"},children:"Have an account? Login here"})]})},p=a(85),v=a(16),N=a(211),C=a(205),w=function(e){var t=e.handleChangeCount,a=e.fruitCount;return Object(x.jsx)(N.a,{children:Object(x.jsx)(C.a,{size:"small",inputProps:{min:1},type:"number",label:"Count",id:"select-count",value:a,onChange:function(e){t(parseInt(e.target.value,10))}})})},k=a(201),y=a(210),S=a(71),P=a.n(S),I=function(e){var t=e.fruitItem,a=e.fruitPrice,n=e.handleRemove,s=e.fruitCount,r=e.handleCount,l=(e.fruitTotal,Object(c.useState)(s)),i=Object(j.a)(l,2),o=i[0],u=i[1];return Object(x.jsxs)(k.a,{divider:!0,secondaryAction:Object(x.jsx)(y.a,{onClick:function(){n(t)},children:Object(x.jsx)(P.a,{})}),children:[Object(x.jsx)(O.a,{className:"col-3 text-center",children:t}),Object(x.jsx)(O.a,{className:"col-3 text-center",children:a}),Object(x.jsx)(w,{count:o,handleChangeCount:function(e){u(e),r(t,a,e)},fruitItem:t,fruitCount:s}),Object(x.jsx)(O.a,{className:"col-3 text-center",children:a*o})]})},R=function(e){var t=e.item;return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(k.a,{divider:!0,children:[Object(x.jsx)(O.a,{className:"col-3 text-center",children:t.item}),Object(x.jsx)(O.a,{className:"col-3 text-center",children:t.price}),Object(x.jsx)(O.a,{className:"col-3 text-center",children:t.count}),Object(x.jsx)(O.a,{className:"col-3 text-center",children:t.totalPrice})]})})},F=a(212),L=function(e){var t=e.data;return Object(x.jsxs)(x.Fragment,{children:["User: ",t.userName,Object(x.jsxs)(F.a,{children:[Object(x.jsxs)(k.a,{children:[Object(x.jsx)(O.a,{className:"col-3 text-center",children:"Item"}),Object(x.jsx)(O.a,{className:"col-3 text-center",children:"Price"}),Object(x.jsx)(O.a,{className:"col-3 text-center",children:"Count"}),Object(x.jsx)(O.a,{className:"col-3 text-center",children:"Total Price"})]}),t.items.length>0?t.items.map((function(e,t){return Object(x.jsx)(R,{item:e},t)})):"",Object(x.jsxs)(k.a,{children:[Object(x.jsx)(O.a,{className:"col-3 text-center"}),Object(x.jsx)(O.a,{className:"col-3 text-center"}),Object(x.jsx)(O.a,{className:"col-3 text-center",children:"Final Bill"}),Object(x.jsx)(O.a,{className:"col-3 text-center",children:Object(x.jsx)("strong",{children:t.finalBill})})]})]})]})},E=a(198),B=a(202),A=a(207),T=a(203),z=a(209),M=function(e){var t=e.currentUser,a=e.fruits,n="https://react-mongo-lloyd.herokuapp.com/api/",s=function(){var e=Object(o.a)(i.a.mark((function e(a){var c,s,r,l,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in V(!0),c=0,g)c+=g[s].totalPrice;return e.next=5,b.a.post("".concat(n,"transactions"),{name:t.name,userId:t._id,items:g,total:c});case 5:return r=e.sent,l=r.data.data.insertedId,e.next=9,b.a.get("".concat(n,"transactions/").concat(l));case 9:o=e.sent,q(o.data),D(!0),V(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=Object(c.useState)("apple"),l=Object(j.a)(r,2),u=l[0],d=l[1],h=Object(c.useState)([]),m=Object(j.a)(h,2),g=m[0],C=m[1],w=Object(c.useState)(!1),S=Object(j.a)(w,2),R=S[0],M=S[1],U=Object(c.useState)(!1),Z=Object(j.a)(U,2),$=Z[0],D=Z[1],H=Object(c.useState)([]),J=Object(j.a)(H,2),_=J[0],q=J[1],G=Object(c.useState)(!1),K=Object(j.a)(G,2),Q=K[0],V=K[1],W=function(e){var t=g.filter((function(t){return t.item!==e}));console.log(t),console.log(e),C(t)},X=function(e,t,a){var c=g.map((function(c){return c.item===e?Object(p.a)(Object(p.a)({},c),{},{count:a,totalPrice:t*a}):c}));C(c),console.log(c)};return Object(x.jsxs)(x.Fragment,{children:[R?Object(x.jsx)(f.a,{severity:"error",className:"mb-3",onClose:function(){M(!1)},children:"Fruit already added"}):"",Object(x.jsxs)(O.a,{className:"",children:[Object(x.jsx)(O.a,{className:"row justify-content-center",children:Object(x.jsxs)(O.a,{className:"",children:["Hello ",t.name]})}),Object(x.jsxs)(O.a,{className:"row justify-content-center w-50 m-auto",children:[Object(x.jsxs)(N.a,{className:"col-9",size:"small",children:[Object(x.jsx)(T.a,{id:"select-label-fruits",children:"Fruits"}),a.length>0?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(E.a,{sx:{display:"inline"},labelId:"select-label-fruits",id:"select-fruits",value:u,label:"Fruits",onChange:function(e){d(e.target.value)},children:a.map((function(e,t){return Object(x.jsx)(B.a,{value:e.item,children:e.item},t)}))})}):""]}),Object(x.jsx)(A.a,{variant:"contained",className:"col-1",onClick:function(){!function(e){var t=a.find((function(t){return t.item===e}));for(var c in console.log(t.price),g)if(e===g[c].item)return void M(!0);M(!1);var n={item:e,price:t.price,count:1,totalPrice:t.price};console.log(n),C([].concat(Object(v.a)(g),[n]))}(u)},children:"Add"})]})]}),Object(x.jsx)(O.a,{className:"row ",children:Object(x.jsxs)(F.a,{children:[Object(x.jsxs)(k.a,{divider:!0,secondaryAction:g.length>0?Object(x.jsx)(y.a,{onClick:function(){C([])},children:Object(x.jsx)(P.a,{})}):"",children:[Object(x.jsx)(O.a,{className:"col-3 text-center",children:"Item"}),Object(x.jsx)(O.a,{className:"col-3 text-center",children:"Price"}),Object(x.jsx)(O.a,{className:"col-3 text-center",children:"Count"}),Object(x.jsx)(O.a,{className:"col-3 text-center",children:"Total"})]}),g.length>0?g.map((function(e,t){return Object(x.jsx)(I,{fruitItem:e.item,fruitPrice:e.price,fruitCount:e.count,fruitTotal:e.totalPrice,handleRemove:W,handleCount:X},t)})):"No Items"]})}),Object(x.jsx)(O.a,{className:"justify-content-end d-flex",children:Object(x.jsx)(A.a,{className:"",disabled:!(!$&&0!==g.length),variant:"contained",onClick:function(){s()},children:"Buy"})}),Object(x.jsx)(O.a,{children:$?Object(x.jsx)(L,{data:_.data}):Q?Object(x.jsx)("div",{className:"text-center",children:Object(x.jsx)(z.a,{})}):""})]})},U=(a(152),a(14));var Z=function(){var e="https://react-mongo-lloyd.herokuapp.com/api/",t=Object(c.useState)([]),a=Object(j.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(!1),l=Object(j.a)(r,2),u=l[0],f=l[1],p=Object(c.useState)(!1),v=Object(j.a)(p,2),N=v[0],C=v[1],w=Object(c.useState)(!1),k=Object(j.a)(w,2),y=k[0],S=k[1],P=Object(c.useState)(!1),I=Object(j.a)(P,2),R=I[0],F=I[1],L=Object(c.useState)(!1),E=Object(j.a)(L,2),B=E[0],A=E[1],T=Object(c.useState)(!1),Z=Object(j.a)(T,2),$=Z[0],D=Z[1],H=Object(c.useState)(!1),J=Object(j.a)(H,2),_=J[0],q=J[1],G=Object(c.useState)(!1),K=Object(j.a)(G,2),Q=K[0],V=K[1],W=Object(c.useState)(!1),X=Object(j.a)(W,2),Y=X[0],ee=X[1],te=Object(c.useState)(!1),ae=Object(j.a)(te,2),ce=ae[0],ne=ae[1],se=Object(c.useState)(""),re=Object(j.a)(se,2),le=re[0],ie=re[1],oe=function(){var t=Object(o.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!0),t.next=3,b.a.get("".concat(e,"items"));case 3:a=t.sent,s(a.data.data),f(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){oe()}),[]);var je=function(){var t=Object(o.a)(i.a.mark((function t(a,c,n,s){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(S(!1),C(!0),A(!1),D(!1),!me(a)){t.next=20;break}if(c===s){t.next=9;break}return C(!1),D(!0),t.abrupt("return");case 9:return t.next=11,b.a.post("".concat(e,"users"),{name:n,pass:c,email:a});case 11:t.sent,C(!1),S(!0),A(!1),D(!1),F(!0),F(!1),t.next=21;break;case 20:be();case 21:case"end":return t.stop()}}),t)})));return function(e,a,c,n){return t.apply(this,arguments)}}(),ue=function(){S(!1)},be=function(){C(!1),A(!0),S(!1)},de=function(){var t=Object(o.a)(i.a.mark((function t(a,c){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(q(!1),V(!0),ee(!1),!me(a)){t.next=10;break}return t.next=6,b.a.post("".concat(e,"users/login"),{email:a,pass:c});case 6:null===(n=t.sent).data.data?Oe():xe(n.data),t.next=11;break;case 10:he();case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),he=function(){V(!1),ee(!0),q(!1)},Oe=function(){console.log("no account found"),ie(null),V(!1),ee(!1),q(!0)},xe=function(e){V(!1),q(!1),ee(!1),ne(!0),ie(e.data),window.location.replace("./#/shop")},me=function(e){return/[a-zA-Z0-9!@#$%&'*+'-=]+@[a-zA-Z0-9!@#$%&'*+'-=]+\.[a-zA-Z0-9!@#$%&'*+'-=]+/.test(e)};return Object(x.jsx)(d.a,{children:Object(x.jsxs)(O.a,{className:"container-sm w-50 my-2 p-3 dark-border text",children:[y?Object(x.jsxs)("div",{className:"alert-box bg-light-green p-3",children:["Registration successful",Object(x.jsx)(h.a,{className:"align-right-icon",onClick:function(){ue()}})]}):"",u?Object(x.jsx)("div",{className:"text-center",children:Object(x.jsx)(z.a,{})}):Object(x.jsxs)(U.d,{children:[Object(x.jsx)(U.b,{path:"/",element:Object(x.jsx)(m,{handleLogin:de,setRegSuccess:S,loginLoading:Q,loginFail:_,invalidEmail:Y,handleCloseLog:function(){q(!1)},handleCloseEmail:function(){ee(!1)}})}),R?Object(x.jsx)(U.b,{path:"/register",element:Object(x.jsx)(U.a,{to:"/"})}):Object(x.jsx)(U.b,{path:"/register",element:Object(x.jsx)(g,{handleRegister:je,regLoading:N,handleCloseReg:ue,handleInvalidRegister:be,invalidRegister:B,handleInvalidRegisterClose:function(){A(!1)},passwordMismatch:$,setPasswordMismatch:D})}),ce?Object(x.jsx)(U.b,{path:"/shop",element:Object(x.jsx)(M,{currentUser:le,fruits:n})}):Object(x.jsx)(U.b,{path:"/shop",element:Object(x.jsx)(U.a,{to:"/"})})]})]})})},$=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,216)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};r.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(Z,{})}),document.getElementById("root")),$()}},[[153,1,2]]]);
//# sourceMappingURL=main.12af4aee.chunk.js.map