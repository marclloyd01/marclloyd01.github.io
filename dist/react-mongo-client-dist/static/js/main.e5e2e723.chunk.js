(this["webpackJsonpreact-mongo"]=this["webpackJsonpreact-mongo"]||[]).push([[0],{15:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(9),o=n.n(s),r=(n(15),n(3)),i=n(5),l=n(0),j=function(e){var t=e.handleLogin,n=Object(c.useState)(""),a=Object(r.a)(n,2),s=a[0],o=a[1],j=Object(c.useState)(""),u=Object(r.a)(j,2),h=u[0],d=u[1];return Object(l.jsx)("div",{className:"",children:Object(l.jsxs)("div",{className:"",children:[Object(l.jsx)("h2",{children:"Login"}),Object(l.jsx)("label",{className:"h5",children:"Email"}),Object(l.jsx)("input",{type:"text",className:"form-control",placeholder:"Email",value:s,onChange:function(e){o(e.target.value)}}),Object(l.jsx)("label",{className:"h5",children:"Password"}),Object(l.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",value:h,onChange:function(e){d(e.target.value)}}),Object(l.jsx)(i.b,{to:{pathname:"./register"},children:"Don't have an account? Register now!"}),Object(l.jsx)("button",{className:"btn text-white login-register-button my-2 d-block",onClick:function(e){t(s,h)},children:"Login"})]})})},u=function(e){var t=e.handleRegister,n=Object(c.useState)(""),a=Object(r.a)(n,2),s=a[0],o=a[1],j=Object(c.useState)(""),u=Object(r.a)(j,2),h=u[0],d=u[1],b=Object(c.useState)(""),m=Object(r.a)(b,2),O=m[0],p=m[1];return Object(l.jsxs)("div",{className:"",children:[Object(l.jsx)("h2",{children:"Register"}),Object(l.jsx)("label",{className:"h5",children:"Email"}),Object(l.jsx)("input",{type:"email",className:"form-control",placeholder:"Email",value:s,onChange:function(e){o(e.target.value)}}),Object(l.jsx)("label",{className:"h5",children:"Password"}),Object(l.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",value:h,onChange:function(e){d(e.target.value)}}),Object(l.jsx)("label",{className:"h5",children:"Name"}),Object(l.jsx)("input",{type:"text",className:"form-control",placeholder:"Name",value:O,onChange:function(e){p(e.target.value)}}),Object(l.jsx)(i.b,{to:{pathname:"/"},children:"Have an account? Login now!"}),Object(l.jsx)(i.b,{to:{pathname:""},children:Object(l.jsx)("button",{className:"btn text-white login-register-button my-2 d-block",onClick:function(){t(s,h,O)},children:"Register"})}),Object(l.jsx)("button",{onClick:function(){console.log(s,h,O)},children:"test"})]})},h=n(10),d=function(e){var t=e.fruits;return Object(l.jsx)("option",{children:t.item})},b=function(e){var t=e.fruits,n=e.selectedFruit,c=e.setSelectedFruit;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("label",{className:"h5",children:"Fruits"}),Object(l.jsx)("br",{}),Object(l.jsx)("select",{className:"mx-2",value:n,onChange:function(e){c(e.target.value)},children:t.map((function(e,t){return Object(l.jsx)(d,{fruits:e},t)}))})]})},m=function(e){var t=e.item,n=e.handleRemove,a=e.index,s=e.fruits,o=Object(c.useState)(0),i=Object(r.a)(o,2),j=i[0],u=i[1],h=s.find((function(e){return e.item===t}));return Object(l.jsxs)("div",{className:"p-2 my-2 dark-border row text-center",children:[Object(l.jsxs)("div",{className:"col-3",children:[t,Object(l.jsxs)("div",{className:"",children:["Price: ",h.price]})]}),Object(l.jsx)("div",{className:"col-3",children:Object(l.jsx)("input",{min:0,type:"number",className:"",value:j,onChange:function(e){!function(e){u(parseInt(e.target.value)),h.count=parseInt(e.target.value)}(e)}})}),Object(l.jsx)("div",{className:"col-3",children:h.price*j}),Object(l.jsx)("div",{className:"col-3",children:Object(l.jsx)("button",{onClick:function(){return n(a)},children:"remove"})})]})},O=function(e){var t=e.results;return Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{children:"Transaction:"}),Object(l.jsxs)("h5",{children:["Name: ",t.userName]}),Object(l.jsx)("ol",{children:null!==t?t.items.map((function(e,t){return Object(l.jsx)("li",{children:e},t)})):""}),Object(l.jsxs)("h5",{children:["Total Price: ",t.price]})]})},p=function(e){var t=e.currentUser,n=e.fruits,a=Object(c.useState)("apple"),s=Object(r.a)(a,2),o=s[0],j=s[1],u=Object(c.useState)([]),d=Object(r.a)(u,2),p=d[0],f=d[1],x=function(e){var t=p.filter((function(t){return t!==p[e]}));console.log(t),f(t)},g=Object(c.useState)(null),v=Object(r.a)(g,2),N=v[0],y=v[1];return Object(l.jsxs)("div",{className:"shop",children:[Object(l.jsxs)("div",{className:"h4 d-block",children:["Hello ",t.name]}),Object(l.jsx)(b,{fruits:n,selectedFruit:o,setSelectedFruit:j}),Object(l.jsx)("button",{onClick:function(){return function(){for(var e in p)if(p[e]===o)return void console.log("dupe");f([].concat(Object(h.a)(p),[o]))}()},children:"Add"}),p.length>0?Object(l.jsxs)("div",{className:"row text-center",children:[Object(l.jsx)("div",{className:"col-3 h5",children:"Item"}),Object(l.jsx)("div",{className:"col-3 h5",children:"Count"}),Object(l.jsx)("div",{className:"col-3 h5",children:"Total Price"}),Object(l.jsx)("div",{className:"col-3 h5"})]}):"",p.map((function(e,t){return Object(l.jsx)(m,{item:e,index:t,handleRemove:x,fruits:n},t)})),p.length>0?Object(l.jsx)("button",{onClick:function(){var e=0;for(var c in n)e+=n[c].price*n[c].count;fetch("https://react-mongo-lloyd.herokuapp.com/api/transactions",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({name:t.name,items:p,total:e})}).then((function(e){return e.json()})).then((function(e){fetch("https://react-mongo-lloyd.herokuapp.com/api/transactions/"+e.data.insertedId).then((function(e){return e.json()})).then((function(e){return y(e.data)}))}))},children:"Buy"}):"",Object(l.jsx)(i.b,{to:{pathname:"/"},children:Object(l.jsx)("button",{children:"Logout"})}),null!==N?Object(l.jsx)(O,{results:N}):""]})},f=(n(17),n(2));var x=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1];Object(c.useEffect)((function(){fetch("https://react-mongo-lloyd.herokuapp.com/api/items").then((function(e){return e.json()})).then((function(e){return a(e.data)}))}),[]);var s=Object(c.useState)(""),o=Object(r.a)(s,2),h=o[0],d=o[1],b=function(){console.log("no account found"),d(null)},m=function(e){d(e.data),window.location.replace("./#/shop")};return Object(l.jsx)(i.a,{children:Object(l.jsx)("div",{className:"container-sm w-75 my-2 p-3 dark-border",children:Object(l.jsxs)(f.c,{children:[Object(l.jsx)(f.a,{path:"/",element:Object(l.jsx)(j,{handleLogin:function(e,t){console.log(e,t),fetch("https://react-mongo-lloyd.herokuapp.com/api/users/login",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({email:e,pass:t})}).then((function(e){return e.json()})).then((function(e){null===e.data?b():m(e)}))}})}),Object(l.jsx)(f.a,{path:"/register",element:Object(l.jsx)(u,{handleRegister:function(e,t,n){console.log(e,t,n),fetch("https://react-mongo-lloyd.herokuapp.com/api/users/",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({name:n,pass:t,email:e})}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}})}),Object(l.jsx)(f.a,{path:"/shop",element:Object(l.jsx)(p,{currentUser:h,fruits:n})})]})})})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),s(e),o(e)}))};o.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(x,{})}),document.getElementById("root")),g()}},[[18,1,2]]]);
//# sourceMappingURL=main.e5e2e723.chunk.js.map