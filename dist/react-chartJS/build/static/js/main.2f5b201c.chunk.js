(this["webpackJsonpreact-mongo"]=this["webpackJsonpreact-mongo"]||[]).push([[0],{134:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(45),i=a.n(s),r=(a(134),a(23)),l=a.n(r),o=a(40),j=a(5),d=a(30),u=a.n(d),b=a(36),O=a(206),x=a(218),h=a(209),m=a(217),f=a(63),p=a.n(f),g=a(64),v=a.n(g),N=a(213),S=a(216),C=a(73),w=a(1),y=function(e){var t=e.handleLogin,a=e.loginLoading,n=e.loginFail,s=e.invalidEmail,i=e.accountNotExists,r=e.setAccountNotExists,l=e.setLoginFail,o=e.setInvalidEmail,d=e.setFieldsEmpty,u=e.showloginButton,f=e.clientId,g=e.onLoginSuccess,y=e.onLoginFailure,k=Object(c.useState)(""),I=Object(j.a)(k,2),P=I[0],E=I[1],F=Object(c.useState)(""),L=Object(j.a)(F,2),A=L[0],B=L[1],R=Object(c.useState)(!1),T=Object(j.a)(R,2),W=T[0],M=T[1];return Object(w.jsxs)(S.a,{className:"",children:[i&&Object(w.jsx)(O.a,{severity:"error",onClose:function(){r(!1)},children:"Account does not exist"}),n&&Object(w.jsx)(O.a,{severity:"error",onClose:function(){l(!1)},children:"Login failed"}),s&&Object(w.jsx)(O.a,{severity:"error",onClose:function(){o(!1)},children:"Invalid Email Address"}),a&&Object(w.jsx)(O.a,{severity:"info",children:"Logging in..."}),Object(w.jsxs)("form",{children:[Object(w.jsx)("h2",{children:"Login"}),Object(w.jsx)("label",{className:"h5",children:"Email"}),Object(w.jsx)(x.a,{fullWidth:!0,placeholder:"Email",value:P,onChange:function(e){E(e.target.value)}}),Object(w.jsx)("label",{className:"h5 mt-2",children:"Password"}),Object(w.jsx)(x.a,{fullWidth:!0,type:W?"text":"password",placeholder:"Password",value:A,onChange:function(e){B(e.target.value)},endAdornment:Object(w.jsx)(h.a,{position:"end",onClick:function(){M(!W)},children:Object(w.jsx)(m.a,{children:W?Object(w.jsx)(p.a,{}):Object(w.jsx)(v.a,{})})})}),Object(w.jsx)(N.a,{type:"submit",fullWidth:!0,className:"my-3",variant:"contained",onClick:function(e){t(P,A,e)},children:"Login"}),Object(w.jsxs)(S.a,{className:"d-flex justify-content-between",children:[Object(w.jsx)(b.b,{to:{pathname:"/register"},onClick:function(){d()},children:"Don't have an account? Register here"}),u?Object(w.jsx)(C.GoogleLogin,{clientId:f,onSuccess:g,onFailure:y,cookiePolicy:"single_host_origin"}):null]})]})]})},k=a(203),I=a(207),P=function(e){var t=e.handleRegister,a=e.regLoading,n=e.invalidRegister,s=e.setInvalidRegister,i=e.passwordMismatch,r=e.setPasswordMismatch,l=e.emailExists,o=e.setEmailExists,d=e.setFieldsEmpty,u=e.nameInput,f=e.setNameInput,g=e.emailInput,S=e.setEmailInput,C=e.passInput,y=e.setPassInput,P=e.passConfirmInput,E=e.setPassConfirmInput,F=e.age,L=e.setAge,A=e.gender,B=e.setGender,R=Object(c.useState)(!1),T=Object(j.a)(R,2),W=T[0],M=T[1];return Object(w.jsxs)("div",{className:"",children:[i&&Object(w.jsx)(O.a,{severity:"error",className:"my-3",onClose:function(){r(!1)},children:"Passwords do not match"}),l&&Object(w.jsxs)(O.a,{severity:"error",onClose:function(){o(!1)},children:["Email already exists"," "]}),a&&Object(w.jsx)(O.a,{severity:"info",children:" Registering... "}),n&&Object(w.jsx)(O.a,{severity:"error",onClose:function(){s(!1)},children:"Invalid Email Address"}),Object(w.jsx)("h2",{children:"Register"}),Object(w.jsxs)("form",{children:[Object(w.jsx)("label",{className:"h5 d-block",children:"Name"}),Object(w.jsx)(x.a,{fullWidth:!0,placeholder:"Name",value:u,onChange:function(e){f(e.target.value)}}),Object(w.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(w.jsxs)("div",{className:"col-6 ",style:{paddingRight:"1vw"},children:[Object(w.jsx)("label",{className:"h5 d-block",children:"Gender"}),Object(w.jsxs)(k.a,{variant:"standard",fullWidth:!0,value:A,onChange:function(e){B(e.target.value)},children:[Object(w.jsx)(I.a,{value:"Male",children:"Male"}),Object(w.jsx)(I.a,{value:"Female",children:"Female"}),Object(w.jsx)(I.a,{value:"Other",children:"Other"})]})]}),Object(w.jsxs)("div",{className:"col-6",children:[Object(w.jsx)("label",{className:"h5 d-block",children:"Age"}),Object(w.jsx)(x.a,{fullWidth:!0,value:F,type:"number",inputProps:{min:16,max:150},onChange:function(e){L(e.target.value)}})]})]}),Object(w.jsx)("label",{className:"h5 mt-2",children:"Email"}),Object(w.jsx)(x.a,{fullWidth:!0,type:"email",placeholder:"Email",value:g,onChange:function(e){S(e.target.value)}}),Object(w.jsx)("label",{className:"h5 mt-2",children:"Password"}),Object(w.jsx)(x.a,{fullWidth:!0,type:W?"text":"password",placeholder:"Password",value:C,onChange:function(e){y(e.target.value)},endAdornment:Object(w.jsx)(h.a,{position:"end",onClick:function(){M(!W)},children:Object(w.jsx)(m.a,{children:W?Object(w.jsx)(p.a,{}):Object(w.jsx)(v.a,{})})})}),Object(w.jsx)("label",{className:"h5 mt-2",children:"Confirm Password"}),Object(w.jsx)(x.a,{fullWidth:!0,type:W?"text":"password",placeholder:"Password",value:P,onChange:function(e){E(e.target.value)},endAdornment:Object(w.jsx)(h.a,{position:"end",onClick:function(){M(!W)},children:Object(w.jsx)(m.a,{children:W?Object(w.jsx)(p.a,{}):Object(w.jsx)(v.a,{})})})}),Object(w.jsx)(N.a,{className:"my-3",type:"submit",fullWidth:!0,variant:"contained",onClick:function(e){t(e,u,A,F,g,C,P)},children:"Register"})]}),Object(w.jsx)(b.b,{to:{pathname:"/login"},onClick:function(){d()},children:"Have an account? Login here"})]})},E=a(96),F=a(16),L=a(220),A=a(211),B=function(e){var t=e.handleChangeCount,a=e.fruitCount,c=e.transactionState;return Object(w.jsx)(L.a,{children:Object(w.jsx)(A.a,{InputProps:{endAdornment:Object(w.jsx)(h.a,{position:"start",children:"kg"})},disabled:c,size:"small",inputProps:{min:1},type:"tel",label:"Kilo",id:"select-count",value:isNaN(a)?0:a,onChange:function(e){t(parseInt(e.target.value,10))}})})},R=a(208),T=a(78),W=a.n(T),M=function(e){var t=e.fruitItem,a=e.fruitPrice,n=e.handleRemove,s=e.fruitCount,i=e.handleCount,r=(e.fruitTotal,e.transactionState),l=Object(c.useState)(s),o=Object(j.a)(l,2),d=o[0],u=o[1];return Object(w.jsxs)(R.a,{divider:!0,secondaryAction:Object(w.jsx)(m.a,{disabled:r,onClick:function(){n(t)},children:Object(w.jsx)(W.a,{})}),children:[Object(w.jsx)(S.a,{className:"col-3 text-center",children:t}),Object(w.jsxs)(S.a,{className:"col-3 text-center",children:[" \u20b1",a]}),Object(w.jsx)(B,{transactionState:r,count:d,handleChangeCount:function(e){isNaN(e)&&(e=0),u(e),i(t,a,e)},fruitItem:t,fruitCount:s}),Object(w.jsxs)(S.a,{className:"col-3 text-center",children:["\u20b1",isNaN(d)?"":a*d]})]})},U=function(e){var t=e.item;return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(R.a,{divider:!0,children:[Object(w.jsx)(S.a,{className:"col-3 text-center",children:t.item}),Object(w.jsxs)(S.a,{className:"col-3 text-center",children:[" \u20b1",t.price]}),Object(w.jsxs)(S.a,{className:"col-3 text-center",children:[t.count," kg"]}),Object(w.jsxs)(S.a,{className:"col-3 text-center",children:[" \u20b1",t.totalPrice]})]})})},_=a(219),z=function(e){var t=e.data,a=e.showTransaction,c=e.handleBuy;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h2",{children:"Transaction"}),"User: ",t.name,Object(w.jsxs)(_.a,{children:[Object(w.jsxs)(R.a,{children:[Object(w.jsx)(S.a,{className:"col-3 text-center",children:"Item"}),Object(w.jsx)(S.a,{className:"col-3 text-center",children:"Price"}),Object(w.jsx)(S.a,{className:"col-3 text-center",children:"Kilo"}),Object(w.jsx)(S.a,{className:"col-3 text-center",children:"Total Price"})]}),t.items.length>0?t.items.map((function(e,t){return Object(w.jsx)(U,{item:e},t)})):"",Object(w.jsxs)(R.a,{children:[Object(w.jsx)(S.a,{className:"col-3 text-center",children:"Final Bill"}),Object(w.jsx)(S.a,{className:"col-3 text-center"}),Object(w.jsx)(S.a,{className:"col-3 text-center"}),Object(w.jsx)(S.a,{className:"col-3 text-center",children:Object(w.jsxs)("strong",{children:[" \u20b1",t.total]})})]})]}),Object(w.jsxs)(S.a,{className:"d-flex justify-content-between",children:[Object(w.jsx)(N.a,{variant:"contained",onClick:function(){a(!1)},children:"Edit"}),Object(w.jsx)(N.a,{variant:"contained",onClick:function(){c()},children:"Buy"})]})]})},G=function(e){var t=e.data,a=e.handleCloseModal;return Object(w.jsxs)(S.a,{children:[Object(w.jsx)("h2",{children:"Your Bill"}),"User: ",t.userName,Object(w.jsx)("br",{}),"Transaction Id: ",t._id,Object(w.jsxs)(_.a,{children:[Object(w.jsxs)(R.a,{children:[Object(w.jsx)(S.a,{className:"col-3 text-center",children:"Item"}),Object(w.jsx)(S.a,{className:"col-3 text-center",children:"Price"}),Object(w.jsx)(S.a,{className:"col-3 text-center",children:"Kilo"}),Object(w.jsx)(S.a,{className:"col-3 text-center",children:"Total Price"})]}),t.items.length>0?t.items.map((function(e,t){return Object(w.jsx)(U,{item:e},t)})):"",Object(w.jsxs)(R.a,{children:[Object(w.jsx)(S.a,{className:"col-3 text-center",children:"Final Bill"}),Object(w.jsx)(S.a,{className:"col-3 text-center"}),Object(w.jsx)(S.a,{className:"col-3 text-center"}),Object(w.jsx)(S.a,{className:"col-3 text-center",children:Object(w.jsx)("strong",{children:t.finalBill})})]})]}),Object(w.jsx)(S.a,{className:"",children:Object(w.jsx)(N.a,{variant:"contained",fullWidth:!0,onClick:function(){a()},children:"Close"})})]})},K=a(210),D=a(215),H=a(204),Z=function(e){var t=e.currentUser,a=e.fruits,n=e.setFruits,s=Object(c.useState)(a),i=Object(j.a)(s,2),r=i[0],d=(i[1],Object(c.useState)("default")),b=Object(j.a)(d,2),x=b[0],h=b[1],f=Object(c.useState)([]),p=Object(j.a)(f,2),g=p[0],v=p[1],C=Object(c.useState)(!1),y=Object(j.a)(C,2),P=y[0],A=y[1],B=Object(c.useState)(!1),T=Object(j.a)(B,2),U=T[0],Z=T[1],$=Object(c.useState)(!1),q=Object(j.a)($,2),J=q[0],Y=q[1],Q=Object(c.useState)([]),V=Object(j.a)(Q,2),X=V[0],ee=V[1],te=Object(c.useState)([]),ae=Object(j.a)(te,2),ce=ae[0],ne=ae[1],se="https://react-mongo-lloyd.herokuapp.com/api/",ie=function(e){var t=r.filter((function(t){return t.item===e})),c=g.filter((function(t){return t.item!==e}));v(c);var s=t[0];n([].concat(Object(F.a)(a),[s]))},re=function(e,t,a){var c=g.map((function(c){return c.item===e?Object(E.a)(Object(E.a)({},c),{},{count:a,totalPrice:t*a}):c}));v(c)},le=function(){var e=Object(o.a)(l.a.mark((function e(){var t,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue(!0),Y(!0),e.next=4,u.a.post("".concat(se,"transactions"),{name:X.name,userId:X.userId,items:X.items,total:X.total});case 4:return t=e.sent,a=t.data.data.insertedId,e.next=8,u.a.get("".concat(se,"transactions/").concat(a));case 8:c=e.sent,ne(c.data.data),Y(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=Object(c.useState)(!1),je=Object(j.a)(oe,2),de=je[0],ue=je[1],be=Object(c.useState)(!1),Oe=Object(j.a)(be,2),xe=Oe[0],he=Oe[1],me=function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return he(!0),e.next=3,u.a.get("".concat(se,"items"));case 3:t=e.sent,n(t.data.data),he(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){me()}),[]),Object(w.jsx)("div",{className:"w-75 m-auto",children:xe?Object(w.jsx)("div",{className:"loading-container w-50 text-center",children:Object(w.jsx)(D.a,{})}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(H.a,{open:de,children:Object(w.jsx)(S.a,{sx:{position:"absolute",width:"75%",top:"50%",left:"50%",transform:"translate(-50%,-50%)",bgcolor:"background.paper",boxShadow:24,padding:4},children:J?Object(w.jsx)("div",{className:"text-center",children:Object(w.jsx)(D.a,{})}):Object(w.jsx)(G,{data:ce,handleCloseModal:function(){ue(!1),Z(!1),v([]),n(r)}})})}),P?Object(w.jsx)(O.a,{severity:"error",className:"mb-3",onClose:function(){A(!1)},children:"Fruit already added"}):"",Object(w.jsxs)(S.a,{className:"",children:[Object(w.jsx)(S.a,{className:"d-flex justify-content-between",children:Object(w.jsx)(S.a,{className:"d-inline h2",children:"Shop"})}),Object(w.jsx)(S.a,{className:"row justify-content-center",children:Object(w.jsxs)(S.a,{className:"",children:["Hello ",t.name]})}),Object(w.jsxs)(S.a,{className:"row justify-content-center w-50 m-auto",children:[Object(w.jsxs)(L.a,{className:"col-9",size:"small",children:[Object(w.jsx)(K.a,{id:"select-label-fruits",children:"Fruits"}),Object(w.jsxs)(k.a,{disabled:!(0!==a.length&&!U),labelId:"select-label-fruits",id:"select-fruits",value:x,label:"Fruits",onChange:function(e){h(e.target.value)},children:[Object(w.jsx)(I.a,{disabled:!0,value:"default",children:"Select Fruit"}),a.map((function(e,t){return Object(w.jsx)(I.a,{value:e.item,children:e.item},t)}))]})]}),Object(w.jsx)(N.a,{disabled:!("default"!==x&&!U),variant:"contained",className:"col-1",onClick:function(){!function(e){var t=a.find((function(t){return t.item===e})),c=a.filter((function(t){return t.item!==e}));n(c),h("default");var s={item:e,price:t.price,count:1,totalPrice:t.price};v([].concat(Object(F.a)(g),[s]))}(x)},children:"Add"})]})]}),Object(w.jsx)(S.a,{className:"row ",children:Object(w.jsxs)(_.a,{children:[Object(w.jsxs)(R.a,{divider:!0,secondaryAction:g.length>0&&Object(w.jsx)(m.a,{disabled:U,onClick:function(){v([]),n(r)},children:Object(w.jsx)(W.a,{})}),children:[Object(w.jsx)(S.a,{className:"col-3 text-center",children:"Item"}),Object(w.jsx)(S.a,{className:"col-3 text-center",children:"Price"}),Object(w.jsx)(S.a,{className:"col-3 text-center",children:"Kilo"}),Object(w.jsx)(S.a,{className:"col-3 text-center",children:"Total"})]}),g.length>0?g.map((function(e,t){return Object(w.jsx)(M,{transactionState:U,fruitItem:e.item,fruitPrice:e.price,fruitCount:e.count,fruitTotal:e.totalPrice,handleRemove:ie,handleCount:re},t)})):Object(w.jsx)(S.a,{className:" text-center",children:"No Fruits Selected"})]})}),Object(w.jsx)(S.a,{className:"justify-content-end d-flex",children:Object(w.jsx)(N.a,{className:"",disabled:!(!U&&0!==g.length),variant:"contained",onClick:function(){!function(){var e=0;for(var a in g)e+=g[a].totalPrice;var c={name:t.name,userId:t._id,items:g,total:e};ee(c),Z(!0)}()},children:"Confirm"})}),Object(w.jsx)(S.a,{children:U&&Object(w.jsx)(z,{handleBuy:le,data:X,showTransaction:Z})})]})})},$=function(e){var t=e.showlogoutButton,a=e.clientId,c=e.onSignoutSuccess,n=e.handleLogout;return Object(w.jsxs)("nav",{className:"bg-white border p-1 d-flex justify-content-between",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"d-inline-block",children:Object(w.jsx)(b.b,{to:{pathname:"/home"},className:"nav-link text-nowrap",children:"Home"})}),Object(w.jsx)("div",{className:"d-inline-block",children:Object(w.jsx)(b.b,{to:{pathname:"/shop"},className:"nav-link text-nowrap",children:"Shop"})})]}),t?Object(w.jsx)(C.GoogleLogout,{clientId:a,buttonText:"Sign Out",onLogoutSuccess:c}):Object(w.jsx)(N.a,{onClick:function(){n()},children:"Logout"})]})},q=function(e){var t=e.currentUser,a=Object(c.useState)([]),n=Object(j.a)(a,2),s=n[0],i=n[1],r=Object(c.useState)(!1),d=Object(j.a)(r,2),b=d[0],O=d[1],x=function(){var e=Object(o.a)(l.a.mark((function e(){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),a=t._id,e.next=4,u.a.get("".concat("https://react-mongo-lloyd.herokuapp.com/api/","transactions/list/").concat(a));case 4:c=e.sent,O(!1),i(c.data.data);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){x()}),[]),Object(w.jsxs)("div",{className:"mx-3",children:[Object(w.jsx)("h2",{children:"Home"}),b?Object(w.jsx)("div",{className:"loading-container w-50 text-center",children:Object(w.jsx)(D.a,{})}):Object(w.jsx)("div",{className:"w-75 m-auto",children:s.map((function(e){return Object(w.jsxs)("div",{className:"transaction-container ",children:[Object(w.jsx)("h5",{children:"Item "}),Object(w.jsx)(_.a,{children:Object(w.jsxs)(R.a,{divider:!0,children:[Object(w.jsx)("div",{className:"col-3 text-center",children:"Item"}),Object(w.jsx)("div",{className:"col-3 text-center",children:"Price"}),Object(w.jsx)("div",{className:"col-3 text-center",children:"Kilo"}),Object(w.jsx)("div",{className:"col-3 text-center",children:"Total Price"})]})}),Object(w.jsxs)(_.a,{children:[e.items.map((function(e){return Object(w.jsxs)(R.a,{divider:!0,children:[Object(w.jsx)("div",{className:"col-3 text-center",children:e.item}),Object(w.jsxs)("div",{className:"col-3 text-center",children:["\u20b1",e.price]}),Object(w.jsx)("div",{className:"col-3 text-center",children:e.count}),Object(w.jsxs)("div",{className:"col-3 text-center",children:["\u20b1",e.totalPrice]})]},e.item)})),Object(w.jsxs)(R.a,{children:[Object(w.jsx)("div",{className:"col-3 text-center",children:"Final Bill"}),Object(w.jsx)("div",{className:"col-3 text-center"}),Object(w.jsx)("div",{className:"col-3 text-center"}),Object(w.jsx)("div",{className:"col-3 text-center"})]})]})]},e._id)}))})]})},J=(a(162),a(14));var Y=function(){var e="https://react-mongo-lloyd.herokuapp.com/api/",t=Object(c.useState)([]),a=Object(j.a)(t,2),n=a[0],s=a[1],i=Object(c.useState)(!1),r=Object(j.a)(i,2),d=r[0],x=r[1],h=Object(c.useState)(!1),m=Object(j.a)(h,2),f=m[0],p=m[1],g=Object(c.useState)(!1),v=Object(j.a)(g,2),N=v[0],S=v[1],C=Object(c.useState)(!1),k=Object(j.a)(C,2),I=k[0],E=k[1],F=Object(c.useState)(!1),L=Object(j.a)(F,2),A=L[0],B=L[1],R=Object(c.useState)(!1),T=Object(j.a)(R,2),W=T[0],M=T[1],U=Object(c.useState)(!1),_=Object(j.a)(U,2),z=_[0],G=_[1],K=Object(c.useState)(!1),H=Object(j.a)(K,2),Y=H[0],Q=H[1],V=Object(c.useState)(!1),X=Object(j.a)(V,2),ee=X[0],te=X[1],ae=Object(c.useState)(!1),ce=Object(j.a)(ae,2),ne=ce[0],se=ce[1],ie=Object(c.useState)(!1),re=Object(j.a)(ie,2),le=re[0],oe=re[1],je=Object(c.useState)(!1),de=Object(j.a)(je,2),ue=de[0],be=de[1],Oe=Object(c.useState)(!1),xe=Object(j.a)(Oe,2),he=xe[0],me=xe[1],fe=Object(c.useState)(""),pe=Object(j.a)(fe,2),ge=pe[0],ve=pe[1],Ne=Object(c.useState)(""),Se=Object(j.a)(Ne,2),Ce=Se[0],we=Se[1],ye=Object(c.useState)(""),ke=Object(j.a)(ye,2),Ie=ke[0],Pe=ke[1],Ee=Object(c.useState)(""),Fe=Object(j.a)(Ee,2),Le=Fe[0],Ae=Fe[1],Be=Object(c.useState)(""),Re=Object(j.a)(Be,2),Te=Re[0],We=Re[1],Me=Object(c.useState)(),Ue=Object(j.a)(Me,2),_e=Ue[0],ze=Ue[1],Ge=Object(c.useState)("Male"),Ke=Object(j.a)(Ge,2),De=Ke[0],He=Ke[1],Ze=function(){var t=Object(o.a)(l.a.mark((function t(a,c,n,s,i,r,o){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),p(!1),S(!1),B(!1),Q(!1),M(!1),G(!1),""!==i&&""!==r&&""!==o&&""!==c){t.next=10;break}return Q(!0),t.abrupt("return");case 10:if(qe(i)){t.next=13;break}return B(!0),t.abrupt("return");case 13:if(r===o){t.next=16;break}return M(!0),t.abrupt("return");case 16:return p(!0),t.next=19,u.a.post("".concat(e,"users/validate"),{email:i});case 19:if(null===t.sent.data.data){t.next=24;break}return G(!0),p(!1),t.abrupt("return");case 24:return t.next=26,u.a.post("".concat(e,"users"),{name:c,pass:r,email:i,info:[{gender:n},{age:s}]});case 26:200===t.sent.status&&(p(!1),S(!0),E(!0),E(!1));case 28:case"end":return t.stop()}}),t)})));return function(e,a,c,n,s,i,r){return t.apply(this,arguments)}}(),$e=function(){var t=Object(o.a)(l.a.mark((function t(a,c,n){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),S(!1),Q(!1),te(!1),se(!1),oe(!1),be(!1),""!==a&&""!==c){t.next=10;break}return Q(!0),t.abrupt("return");case 10:if(qe(a)){t.next=13;break}return be(!0),t.abrupt("return");case 13:return oe(!0),t.next=16,u.a.post("".concat(e,"users/validate"),{email:a});case 16:if(null!==t.sent.data.data){t.next=21;break}return te(!0),oe(!1),t.abrupt("return");case 21:return t.next=23,u.a.post("".concat(e,"users/login"),{email:a,pass:c});case 23:if(null!==(s=t.sent).data.data){t.next=28;break}return oe(!1),se(!0),t.abrupt("return");case 28:ve(s.data.data),oe(!1),me(!0);case 31:case"end":return t.stop()}}),t)})));return function(e,a,c){return t.apply(this,arguments)}}(),qe=function(e){return/[a-zA-Z0-9!@#$%&'*+'-=]+@[a-zA-Z0-9!@#$%&'*+'-=]+\.[a-zA-Z0-9!@#$%&'*+'-=]+/.test(e)},Je="768770191011-bm2rl6eidg2nmg84615oq9qp7rsg0ms9.apps.googleusercontent.com",Ye=Object(c.useState)(!0),Qe=Object(j.a)(Ye,2),Ve=Qe[0],Xe=Qe[1],et=Object(c.useState)(!1),tt=Object(j.a)(et,2),at=tt[0],ct=tt[1],nt=function(){var t=Object(o.a)(l.a.mark((function t(a){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a.profileObj),p(!1),S(!1),B(!1),Q(!1),M(!1),G(!1),x(!0),t.next=10,u.a.post("".concat(e,"users/validate"),{email:a.profileObj.email});case 10:null!==(c=t.sent).data.data?(console.log(c.data.data),ve(c.data.data),me(!0),x(!1),Xe(!1),ct(!0)):null===c.data.data&&(console.log("does not exist"),Xe(!0),me(!1),x(!1),Pe(a.profileObj.email),we(a.profileObj.givenName),window.location="./#/register");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(w.jsxs)(b.a,{children:[he&&Object(w.jsx)($,{clientId:Je,showlogoutButton:at,onSignoutSuccess:function(){alert("You have been logged out successfully"),console.clear(),Xe(!0),ct(!1),me(!1),ve()},handleLogout:function(){ve(),me(!1)}}),d?Object(w.jsx)("div",{className:"loading-container w-50 text-center",children:Object(w.jsx)(D.a,{})}):Object(w.jsxs)(J.d,{children:[Object(w.jsx)(J.b,{exact:!0,path:"/",element:Object(w.jsx)(J.a,{to:"/login"})}),Object(w.jsx)(J.b,{path:"/login",element:he?Object(w.jsx)(J.a,{to:"/home"}):Object(w.jsxs)("div",{className:"dark-border vertical-center p-3",children:[Y&&Object(w.jsxs)(O.a,{severity:"error",onClose:function(){Q(!1)},children:["Please fill out all fields"," "]}),N&&Object(w.jsx)(O.a,{severity:"success",onClose:function(){S(!1)},children:"Registration successful"}),Object(w.jsx)(y,{handleLogin:$e,loginLoading:le,accountNotExists:ee,setAccountNotExists:te,loginFail:ne,setLoginFail:se,invalidEmail:ue,setInvalidEmail:be,setFieldsEmpty:Q,showloginButton:Ve,clientId:Je,onLoginSuccess:nt,onLoginFailure:function(e){p(!1),S(!1),B(!1),Q(!1),M(!1),G(!1),console.log("Login Failed:",e)}})]})}),I?Object(w.jsx)(J.b,{path:"/register",element:Object(w.jsx)(J.a,{to:"/"})}):Object(w.jsx)(J.b,{path:"/register",element:Object(w.jsx)("div",{className:"dark-border vertical-center p-3",children:Object(w.jsx)(P,{handleRegister:Ze,regLoading:f,invalidRegister:A,setInvalidRegister:B,passwordMismatch:W,setPasswordMismatch:M,emailExists:z,setEmailExists:G,fieldsEmpty:Y,setFieldsEmpty:Q,nameInput:Ce,setNameInput:we,emailInput:Ie,setEmailInput:Pe,passInput:Le,setPassInput:Ae,passConfirmInput:Te,setPassConfirmInput:We,age:_e,setAge:ze,gender:De,setGender:He})})}),Object(w.jsx)(J.b,{path:"/home",element:he?Object(w.jsx)(q,{currentUser:ge}):Object(w.jsx)(J.a,{to:"/login"})}),Object(w.jsx)(J.b,{path:"/shop",element:he?Object(w.jsx)(Z,{currentUser:ge,fruits:n,setFruits:s}):Object(w.jsx)(J.a,{to:"/login"})})]})]})},Q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,224)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),s(e),i(e)}))};i.a.render(Object(w.jsxs)(n.a.StrictMode,{children:[Object(w.jsx)("div",{className:"g-signin"}),Object(w.jsx)(Y,{})]}),document.getElementById("root")),Q()}},[[163,1,2]]]);
//# sourceMappingURL=main.2f5b201c.chunk.js.map